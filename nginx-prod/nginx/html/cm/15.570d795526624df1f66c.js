(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{NjIt:function(e,t,i){"use strict";i.r(t),i.d(t,"TemplateModule",function(){return Gt});var s=i("ofXK"),n=i("3Pt+"),o=i("oOf3"),l=i("tyNb"),r=i("fXoL");let a=(()=>{class e{constructor(){}ngOnInit(){}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Lb({type:e,selectors:[["app-templates"]],decls:1,vars:0,template:function(e,t){1&e&&r.Sb(0,"router-outlet")},directives:[l.g],styles:["[_nghost-%COMP%]{display:contents}"]}),e})();var c=i("xQ8l"),p=i("bizP"),d=i("gj/C"),h=i("Y6JD"),b=i("lVl8"),m=i("CSvu"),u=i("3NbH"),g=i("NOff"),f=i("bTTa"),x=i("r6fv"),w=i("Q49k"),v=i("6TPk"),y=i("w2QH");function C(e,t){1&e&&(r.Xb(0,"div",15),r.hc(),r.Xb(1,"svg",16),r.Sb(2,"path",17),r.Wb(),r.Wb())}function I(e,t){1&e&&(r.Xb(0,"div",18),r.hc(),r.Xb(1,"svg",19),r.Sb(2,"path",20),r.Wb(),r.Wb())}function T(e,t){1&e&&(r.Xb(0,"h3",21),r.Ic(1,"SUCCESS"),r.Wb())}function W(e,t){1&e&&(r.Xb(0,"h3",21),r.Ic(1," FAILED"),r.Wb())}function X(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",13),r.Xb(1,"button",22),r.ec("click",function(){return r.Ac(e),r.ic().modalContinue()}),r.Ic(2,"Continue"),r.Wb(),r.Wb()}}function S(e,t){if(1&e){const e=r.Yb();r.Xb(0,"button",23),r.ec("click",function(){return r.Ac(e),r.ic().closeCreateModal()}),r.Ic(1,"Cancel "),r.Wb()}}let M=(()=>{class e{constructor(){this.closePopUp=new r.q,this.successPopUp=new r.q,this.tryAgainPopUp=new r.q,this.hideCancel=!1}ngOnInit(){}get typeOfResponce(){return this.message=this.Responce.message,this.Responce.statusCode}closeCreateModal(){this.closePopUp.emit(!0)}modalContinue(){this.successPopUp.emit(!0)}tryAgain(){this.tryAgainPopUp.emit(!0)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Lb({type:e,selectors:[["app-templatedeletepopup"]],inputs:{status:"status",Responce:"Responce"},outputs:{closePopUp:"closePopUp",successPopUp:"successPopUp",tryAgainPopUp:"tryAgainPopUp"},decls:20,vars:8,consts:[["aria-labelledby","modal-title","role","dialog","aria-modal","true",1,"fixed","z-10","inset-0","overflow-y-auto"],[1,"flex","items-end","justify-center","min-h-screen","pt-4","px-4","pb-20","text-center","sm:block","sm:p-0"],["aria-hidden","true",1,"fixed","inset-0","bg-gray-500","bg-opacity-75","transition-opacity"],["aria-hidden","true",1,"hidden","sm:inline-block","sm:align-middle","sm:h-screen"],[1,"inline-block","align-bottom","bg-white","rounded-lg","px-4","pt-5","pb-4","text-left","overflow-hidden","shadow-xl","transform","transition-all","sm:my-8","sm:align-middle","sm:max-w-sm","sm:w-full","sm:p-6"],["class","mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-green-100",4,"ngIf"],["class","mx-auto flex items-center justify-center h-12 w-12 rounded-full bg-red-100",4,"ngIf"],[1,"mt-3","text-center","sm:mt-5"],["class","text-lg leading-6 font-bold text-gray-700","id","modal-title",4,"ngIf"],[1,"mt-2"],[1,"text-sm","text-gray-500"],[1,"text-xs","font-semibold"],["class","mt-5 flex align-middle justify-center space-x-3",4,"ngIf"],[1,"mt-5","flex","align-middle","justify-center","space-x-3"],["type","button","class","bg-white py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",3,"click",4,"ngIf"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-green-100"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor","aria-hidden","true",1,"h-6","w-6","text-green-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M5 13l4 4L19 7"],[1,"mx-auto","flex","items-center","justify-center","h-12","w-12","rounded-full","bg-red-100"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-6","w-6","text-red-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],["id","modal-title",1,"text-lg","leading-6","font-bold","text-gray-700"],["type","submit",1,"inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-indigo-600","hover:bg-indigo-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"],["type","button",1,"bg-white","py-2","px-4","border","border-gray-300","rounded-md","shadow-sm","text-sm","font-medium","text-gray-700","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-500",3,"click"]],template:function(e,t){1&e&&(r.Xb(0,"section",0),r.Xb(1,"div",1),r.Sb(2,"div",2),r.Xb(3,"span",3),r.Ic(4,"\u200b"),r.Wb(),r.Xb(5,"div",4),r.Xb(6,"div"),r.Gc(7,C,3,0,"div",5),r.Gc(8,I,3,0,"div",6),r.Xb(9,"div",7),r.Gc(10,T,2,0,"h3",8),r.Gc(11,W,2,0,"h3",8),r.Xb(12,"div",9),r.Xb(13,"p",10),r.Sb(14,"span",11),r.Ic(15),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Gc(16,X,3,0,"div",12),r.Xb(17,"div",13),r.Xb(18,"div"),r.Gc(19,S,2,0,"button",14),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb()),2&e&&(r.Gb(2),r.qc("@openClose",void 0),r.Gb(5),r.qc("ngIf",200==t.typeOfResponce),r.Gb(1),r.qc("ngIf",200!=t.typeOfResponce),r.Gb(2),r.qc("ngIf",200==t.typeOfResponce),r.Gb(1),r.qc("ngIf",200!=t.typeOfResponce),r.Gb(4),r.Kc(" ",t.message,""),r.Gb(1),r.qc("ngIf",200==t.typeOfResponce),r.Gb(3),r.qc("ngIf",t.typeOfResponce>202||t.typeOfResponce<200))},directives:[s.n],styles:[""],data:{animation:[y.f]}}),e})();var G=i("PNXS");let k=(()=>{class e{constructor(e){this.search=e}transform(e,t){if(t=t.trim(),!e)return[];if(!t)return e;t=t.toLocaleLowerCase();const i=e.filter(e=>e.t_name.toLocaleLowerCase().includes(t)||e.t_type.toLocaleLowerCase().includes(t)||e.t_mobile_column.toLocaleLowerCase().includes(t)||e.t_lang_type.toLocaleLowerCase().includes(t)||e.t_content.toLocaleLowerCase().includes(t)||e.created_ts.toLocaleLowerCase().includes(t));return this.count=i.length,this.search.searchData(i),this.search.searchcount(i.length),i}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(p.a))},e.\u0275pipe=r.Qb({name:"Filter",type:e,pure:!1}),e})();function F(e,t){if(1&e){const e=r.Yb();r.Xb(0,"app-common-delete-button",47),r.ec("showModal",function(t){return r.Ac(e),r.ic(2).onShowResp(t)})("deleteModalResponse",function(t){return r.Ac(e),r.ic(2).onDeleteAllPreviewResp(t)}),r.Wb()}if(2&e){const e=r.ic(2);r.qc("deletingLoader",e.deletingSpinner)("hideshow",e.showhide)("confirmationMessage",e.deleteMessage)}}function q(e,t){if(1&e&&(r.Xb(0,"span",48),r.Ic(1),r.Wb()),2&e){const e=r.ic(2);r.Gb(1),r.Jc(e.selectAllCount)}}function A(e,t){if(1&e&&(r.hc(),r.gc(),r.Xb(0,"a",44),r.Gc(1,F,1,3,"app-common-delete-button",45),r.Gc(2,q,2,1,"span",46),r.Wb()),2&e){const e=r.ic();r.Gb(1),r.qc("ngIf",e.bulkDeleteTempEnable),r.Gb(1),r.qc("ngIf",e.selectAllCount>0&&e.bulkDeleteTempEnable)}}function P(e,t){1&e&&(r.hc(),r.gc(),r.Xb(0,"a",49),r.hc(),r.Xb(1,"svg",50),r.Sb(2,"path",51),r.Sb(3,"line",52),r.Sb(4,"line",53),r.Sb(5,"line",54),r.Sb(6,"path",55),r.Sb(7,"path",56),r.Wb(),r.Wb())}function E(e,t){1&e&&(r.hc(),r.gc(),r.Xb(0,"div",57),r.Xb(1,"button",58),r.hc(),r.Xb(2,"svg",59),r.Sb(3,"rect",60),r.Sb(4,"rect",61),r.Wb(),r.gc(),r.Xb(5,"span",62),r.Ic(6,"New Template"),r.Wb(),r.Wb(),r.Wb())}function D(e,t){if(1&e){const e=r.Yb();r.Xb(0,"input",72),r.ec("click",function(t){return r.Ac(e),r.ic(2).selectall(t)})("ngModelChange",function(t){return r.Ac(e),r.ic(2).masterSelected=t}),r.Wb()}if(2&e){const e=r.ic(2);r.qc("disabled",e.recordCount||e.apiError||e.loader)("ngModel",e.masterSelected)("checked",e.masterSelected)}}function _(e,t){if(1&e){const e=r.Yb();r.Xb(0,"thead",63),r.Xb(1,"tr",24),r.Xb(2,"th",64),r.Gc(3,D,1,3,"input",65),r.Xb(4,"app-sorter",66),r.ec("sortingEmitter",function(t){return r.Ac(e),r.ic().sort(t)})("iconEmitter",function(t){return r.Ac(e),r.ic().iconChange(t)}),r.Wb(),r.Wb(),r.Xb(5,"th",67),r.Xb(6,"div",68),r.Xb(7,"app-sorter",69),r.ec("sortingEmitter",function(t){return r.Ac(e),r.ic().sort(t)})("iconEmitter",function(t){return r.Ac(e),r.ic().iconChange(t)}),r.Wb(),r.Wb(),r.Wb(),r.Xb(8,"th",67),r.Xb(9,"app-sorter",69),r.ec("sortingEmitter",function(t){return r.Ac(e),r.ic().sort(t)})("iconEmitter",function(t){return r.Ac(e),r.ic().iconChange(t)}),r.Wb(),r.Wb(),r.Xb(10,"th",70),r.Xb(11,"app-sorter",69),r.ec("sortingEmitter",function(t){return r.Ac(e),r.ic().sort(t)})("iconEmitter",function(t){return r.Ac(e),r.ic().iconChange(t)}),r.Wb(),r.Wb(),r.Sb(12,"th",71),r.Wb(),r.Wb()}if(2&e){const e=r.ic();r.Gb(3),r.qc("ngIf",e.bulkDeleteTempEnable),r.Gb(1),r.qc("defaultProperty",e.defaultProp)("colTitle","Template Name")("icon",e.nameIcon)("defaultOrder","dce")("sortingProperty","t_name"),r.Gb(3),r.qc("colTitle","Template Message")("defaultProperty",e.defaultProp)("defaultOrder","dce")("icon",e.msgIcon)("sortingProperty","t_content"),r.Gb(2),r.qc("colTitle","TEMPLATE TYPE")("defaultProperty",e.defaultProp)("defaultOrder","dce")("icon",e.typeIcon)("sortingProperty","t_type"),r.Gb(2),r.qc("colTitle",e.createdTs)("defaultProperty",e.defaultProp)("defaultOrder","dce")("icon",e.createdTsIcon)("sortingProperty","created_ts_unix")}}function R(e,t){1&e&&r.Sb(0,"app-list-skeleton",73),2&e&&r.qc("colCount",5)}function U(e,t){if(1&e){const e=r.Yb();r.Xb(0,"input",93),r.ec("click",function(t){r.Ac(e);const i=r.ic().$implicit;return r.ic(2).singleSelect(i,t)}),r.Wb()}if(2&e){const e=r.ic().$implicit;r.qc("checked",1==e.ischecked)}}function O(e,t){if(1&e&&(r.Xb(0,"span",94),r.Ic(1),r.Wb()),2&e){const e=r.ic().$implicit;r.Gb(1),r.Kc(" ",e.t_type," ")}}function L(e,t){if(1&e&&(r.Xb(0,"span",95),r.Ic(1),r.Wb()),2&e){const e=r.ic().$implicit;r.Gb(1),r.Kc(" ",e.t_type,"")}}function B(e,t){if(1&e){const e=r.Yb();r.Xb(0,"a",96),r.ec("click",function(){r.Ac(e);const t=r.ic().$implicit;return r.ic(2).editTemplate(t)}),r.hc(),r.Xb(1,"svg",50),r.Sb(2,"path",51),r.Sb(3,"path",97),r.Sb(4,"path",98),r.Sb(5,"line",99),r.Wb(),r.Wb()}if(2&e){const e=r.ic(3);r.qc("options",e.myOptions)}}function V(e,t){if(1&e){const e=r.Yb();r.Xb(0,"a",44),r.Xb(1,"app-common-delete-button",47),r.ec("showModal",function(t){return r.Ac(e),r.ic(3).onShowResp(t)})("deleteModalResponse",function(t){r.Ac(e);const i=r.ic().$implicit;return r.ic(2).onDeletePreviewResp(t,i)}),r.Wb(),r.Wb()}if(2&e){const e=r.ic(3);r.Gb(1),r.qc("deletingLoader",e.deletingSpinner)("hideshow",e.showhide)("confirmationMessage",e.deleteMessage)}}function j(e,t){if(1&e){const e=r.Yb();r.Xb(0,"tr"),r.Xb(1,"td",76),r.Xb(2,"div",77),r.Gc(3,U,1,1,"input",78),r.Xb(4,"div",79),r.Xb(5,"a",80),r.ec("click",function(){r.Ac(e);const i=t.$implicit;return r.ic(2).previewTemplate(i)})("keydown.enter",function(i){r.Ac(e);const s=t.$implicit;return r.ic(2).backEnter(i,s)}),r.Ic(6),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Xb(7,"td",81),r.Xb(8,"div",82),r.Ic(9),r.Wb(),r.Wb(),r.Xb(10,"td",83),r.Xb(11,"div",84),r.Xb(12,"div",85),r.Gc(13,O,2,1,"span",86),r.Gc(14,L,2,1,"span",87),r.Wb(),r.Wb(),r.Wb(),r.Xb(15,"td",88),r.Xb(16,"div",89),r.Xb(17,"span",90),r.Ic(18),r.Wb(),r.Wb(),r.Wb(),r.Xb(19,"td",91),r.Xb(20,"div",77),r.Gc(21,B,6,1,"a",92),r.Gc(22,V,2,3,"a",29),r.Wb(),r.Wb(),r.Wb()}if(2&e){const e=t.$implicit,i=r.ic(2);r.Gb(3),r.qc("ngIf",i.deleteTempEnable),r.Gb(3),r.Kc(" ",e.t_name," "),r.Gb(3),r.Kc(" ",e.t_content," "),r.Gb(4),r.qc("ngIf","index"==e.t_type),r.Gb(1),r.qc("ngIf","column"==e.t_type),r.Gb(4),r.Kc(" ",e.created_ts," "),r.Gb(3),r.qc("ngIf",i.editTempEnable),r.Gb(1),r.qc("ngIf",i.deleteTempEnable)}}const N=function(e,t,i){return{itemsPerPage:e,currentPage:t,totalItems:i}};function z(e,t){if(1&e&&(r.Xb(0,"tbody",74),r.Gc(1,j,23,8,"tr",75),r.jc(2,"paginate"),r.jc(3,"sorter"),r.jc(4,"Filter"),r.Wb()),2&e){const e=r.ic();r.Gb(1),r.qc("ngForOf",r.lc(2,1,r.mc(3,4,r.lc(4,8,e.collection,e.searchText),e.order,e.searchprop),r.vc(11,N,e.itemsPerPage,e.p,e.total)))}}function H(e,t){if(1&e){const e=r.Yb();r.Xb(0,"app-apierror",100),r.ec("Emitter",function(){return r.Ac(e),r.ic().subscribeData()}),r.Wb()}}function Y(e,t){1&e&&r.Sb(0,"app-nodataerror",101),2&e&&r.qc("title","templates")}function K(e,t){1&e&&r.Sb(0,"app-nodatacreatenew",102),2&e&&r.qc("title","templates")("routePath","/templates/new")}function Z(e,t){if(1&e){const e=r.Yb();r.Xb(0,"app-file-pagination",103),r.ec("paginationValueEmit",function(t){return r.Ac(e),r.ic().ReceivedpaginateValue(t)}),r.Wb()}if(2&e){const e=r.ic();r.qc("total",e.total)("totalRecord",e.totalRecord)("p",e.p)("pagesize",e.pagesize)("itemsPerPage",e.itemsPerPage)("perpageCount",e.perpageCount)}}function $(e,t){if(1&e){const e=r.Yb();r.Xb(0,"app-templatedeletepopup",104),r.ec("closePopUp",function(t){return r.Ac(e),r.ic().closeDeletePopup(t)})("successPopUp",function(t){return r.Ac(e),r.ic().continueDeletePopup(t)})("tryAgainPopUp",function(t){return r.Ac(e),r.ic().tryAgainOnPopup(t)}),r.Wb()}if(2&e){const e=r.ic();r.qc("Responce",e.deleteResponse)}}let J=(()=>{class e{constructor(e,t,i,s){this.search=e,this.commonservice=t,this.router=i,this.template=s,this.deleteCount=new r.q,this.globalSelect=[],this.searchText="",this.TemplateDetail=[],this.total=this.TemplateDetail.length,this.totalRecord=this.TemplateDetail.length,this.p=1,this.itemsPerPage=10,this.collection=[],this.EmptyArray=[],this.recordCount=!1,this.selectedTemplate=[],this.perpageCount=10,this.selectAll=[],this.RecordArray=[],this.checkedAllSelect=!1,this.checkedItem=[],this.deleteMessage=c.a.INFO_TXT.templateDeleteMessage,this.skeletonloader=!0,this.SearchArray=[],this.selectAllCount=0,this.loader=!1,this.userZone="",this.selectedData=[],this.popUp=!1,this.deletingSpinner=!1,this.showDeleteModal=!1,this.showhide=!1,this.searchedData="",this.myOptions=c.b,this.templateLoading=this.template.templateLoading.subscribe(e=>{this.loader=e}),this.dataValue=[],this.apiError=!1,this.noRecords=!1,this.temp=[],this.deleteIds=[],this.order="",this.searchprop="",this.nameIcon=0,this.msgIcon=0,this.typeIcon=0,this.createdTsIcon=2,this.defaultProp="created_ts_unix",this.createdTs="",this.viewTempEnable=!1,this.editTempEnable=!1,this.deleteTempEnable=!1,this.bulkDeleteTempEnable=!1,this.newTempenable=!1}ngOnDestroy(){this.userPermissionSubscription.unsubscribe()}getcount(){if(0==this.searchText.length)this.recordCount=!1,this.total=this.TemplateDetail.length,this.p=1,this.perpageCount=10,this.itemsPerPage=this.perpageCount,this.selectAll=this.TemplateDetail,this.SearchArray=this.TemplateDetail,this.search.searchData(this.TemplateDetail),this.SearchResultCount=0,this.pageCount(),this.iterateArray();else if(this.search.ArrayCount>=0){var e=this.search.ArrayCount;0==e?(this.recordCount=!0,this.total=0,this.p=1,this.perpageCount=10):(this.recordCount=!1,this.total=e,this.p=1,this.perpageCount=10,this.search.userData.subscribe(e=>{this.SearchArray=e}),this.selectAll=this.SearchArray,this.SearchResultCount=this.search.ArrayCount),this.pageCount(),this.iterateArray()}}ngOnInit(){this.getUserPermissions(),this.userZone=this.commonservice.getUserData(),this.subscribeData(),this.createdTs="CREATED DATE  ("+this.userZone+")"}refresh(){this.subscribeData(),this.router.navigate(["templates"])}subscribeData(){this.apiError=!1,this.loader=!1,this.noRecords=!1,this.template.getTemplatesList().subscribe(e=>{e&&(this.dataValue=e,this.search.searchData(e),this.search.searchcount(e.length),0==this.dataValue.length&&(this.noRecords=!0),this.selectedData.length>0?(this.dataValue.forEach(e=>{e.ischecked=!1,this.selectedData.filter(t=>e.id===t.id).forEach(t=>{t.ischecked=!0,e.ischecked=!0})}),this.selectAllCount=this.selectedData.length,this.TemplateDetail=this.dataValue,this.paginateValue(),this.iterateArray()):(this.dataValue.forEach(e=>{e.ischecked=!1}),this.TemplateDetail=this.dataValue,1==this.SearchResultCount?this.searchText="":this.searchText.length>1&&this.pageCount(),this.paginateValue(),this.iterateArray()),this.skeletonloader=!1,this.apiError=!1)},e=>{this.apiError=!0})}paginateValue(){0==this.TemplateDetail.length?(this.total=0,this.totalRecord=this.TemplateDetail.length,this.p=1,this.perpageCount=0,this.masterSelected=!1,this.collection=this.TemplateDetail):this.searchText.length>1?(this.search.userData.subscribe(e=>{this.SearchArray=e}),this.total=this.SearchArray.length,this.totalRecord=this.SearchArray.length,this.p=1,this.itemsPerPage=this.perpageCount,this.collection=this.TemplateDetail):(this.total=this.TemplateDetail.length,this.p=1,this.itemsPerPage=this.perpageCount,this.collection=this.TemplateDetail,this.totalRecord=this.TemplateDetail.length)}singleSelect(e,t){if(this.pageCount(),t.target.checked)e.ischecked=!0,this.selectedData.length>0?this.toCheckAlreadyCheked(e,t):(this.selectedData.push(e),this.selectAllCount=this.selectedData.length);else if(e.ischecked=!1,this.selectedData.length>0)this.toCheckAlreadyCheked(e,t);else{let t=this.selectedData.map(e=>e).indexOf(e);this.selectedData.splice(t,1),this.selectAllCount=this.selectedData.length}this.iterateArray()}toCheckAlreadyCheked(e,t){if(t.target.checked){let t=[];t=this.selectedData,0==(i=t.filter(t=>t.id==e.id)).length&&this.selectedData.push(e),this.selectAllCount=this.selectedData.length}else{let t=[];t=this.selectedData;var i=t.filter(t=>t.id!=e.id);this.selectedData=i,this.selectAllCount=this.selectedData.length}}selectall(e){if(1==this.bulkDeleteTempEnable)if(this.pageCount(),this.selectAll=this.SearchArray.length>0?this.SearchArray:this.TemplateDetail,e.target.checked)this.masterSelected=!0,this.selectAll.slice(this.started,this.ended).forEach(e=>{e.ischecked=!0,this.selectedData.some(t=>t.id===e.id)||this.selectedData.push(e)}),this.selectAllCount=this.selectedData.length;else{this.pageCount();let e=[];e=this.selectAll,e.slice(this.started,this.ended).forEach(e=>{this.selectedData.filter(t=>{t.id==e.id&&(t.ischecked=!1,e.ischecked=!1)})});const t=[!0];this.selectedData=this.selectedData.filter(function(e){return t.indexOf(e.ischecked)>-1}),this.selectAllCount=this.selectedData.length}}select(e){}isAllSelected(){this.iterateArray()}pageCount(){if(0==this.total)this.started=(this.p-1)*this.itemsPerPage;else if(this.total<this.itemsPerPage)this.started=this.total*(this.p-1),this.ended=(e=this.total)<this.total?e:this.total;else{var e;this.started=(this.p-1)*this.itemsPerPage,this.ended=(e=this.p*this.itemsPerPage)<this.total?e:this.total}}iterateArray(){this.SearchArray.length>0?(this.search.userData.subscribe(e=>{this.SearchArray=e}),this.selectAll=this.SearchArray):this.selectAll=this.TemplateDetail;let e=[];e=this.selectAll;let t=e.slice(this.started,this.ended);if(0==t.length)this.masterSelected=!1;else{var i=t.filter(e=>0==e.ischecked);this.masterSelected=!(i.length>0)}}editTemplate(e){this.router.navigate(["templates/edit"],{queryParams:{templates:e.id}}),this.search.setViewTemplatesId(e.id)}previewTemplate(e){1==this.viewTempEnable&&(this.router.navigate(["templates/preview"],{queryParams:{previewTemplates:e.id}}),this.search.setViewTemplatesId(e.id))}backEnter(e,t){13==e.keyCode&&this.previewTemplate(t)}onDeletePreviewResp(e,t){if("yes"===e){this.listDataForRetry=t,this.deletingSpinner=!0;const e={};this.deleteIds=[],this.deleteIds.push(t.id),e.ids=this.deleteIds,this.deleteApiCall(e)}}ontryAgain(){this.onDeleteAllPreviewResp("yes")}onDeleteAllPreviewResp(e){if("yes"===e){this.temp=this.selectedData,this.deletingSpinner=!0;const e={};this.deleteIds=[],this.selectedData.forEach(e=>{this.deleteIds.push(e.id)}),e.ids=this.deleteIds,this.deleteApiCall(e)}"no"===e&&(this.showDeleteModal=!1)}deleteApiCall(e){this.template.deleteSingleTemplate(e).subscribe(e=>{this.showhide=!0,this.deletingSpinner=!1,this.deleteResponse=e,this.popUp=!0,this.deleteIds.forEach(e=>{this.selectedData.filter(t=>t.id===e).forEach(e=>{this.selectedData.splice(this.selectedData.indexOf(e),1)}),this.SearchArray.filter(t=>t.id===e).forEach(e=>{this.SearchArray.splice(this.SearchArray.indexOf(e),1)}),0==this.SearchArray.length&&(this.searchText="")}),this.selectAllCount=this.selectedData.length,this.subscribeData(),this.temp=[]},e=>{this.showhide=!0,this.deletingSpinner=!1,this.deleteResponse=this.template.badError,this.popUp=!0})}onShowResp(e){this.showhide=!1}onRefresh(){this.searchText="",this.searchedData=this.searchText,this.recordCount=!1,this.dataValue=[],this.selectedData=[],this.collection=[],this.masterSelected=!1,this.selectAllCount=0,this.subscribeData()}ReceivedpaginateValue(e){this.p=e,this.pageCount(),this.iterateArray()}closeDeletePopup(e){this.getcount(),this.popUp=!1}tryAgainOnPopup(e){}continueDeletePopup(e){this.getcount(),this.popUp=!1}sort(e){this.searchprop=e.prop,this.order=e.order}iconChange(e){"t_name"==e.prop?(this.nameIcon=e.icon,this.msgIcon=0,this.typeIcon=0,this.createdTsIcon=0):"t_content"==e.prop?(this.msgIcon=e.icon,this.nameIcon=0,this.typeIcon=0,this.createdTsIcon=0):"t_type"==e.prop?(this.typeIcon=e.icon,this.nameIcon=0,this.msgIcon=0,this.createdTsIcon=0):"created_ts_unix"==e.prop&&(this.createdTsIcon=e.icon,this.nameIcon=0,this.msgIcon=0,this.typeIcon=0)}getUserPermissions(){this.userPermissionSubscription=this.commonservice.availablePermissions.subscribe(e=>{if(console.log(e),e){const{templates:t}=e;t.enabled||this.router.navigate(["/page-401"]),this.viewTempEnable=t.templatedetails,this.editTempEnable=t.update,this.deleteTempEnable=t.delete,this.bulkDeleteTempEnable=t.bulkdelete,this.newTempenable=t.create}})}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(p.a),r.Rb(d.a),r.Rb(l.c),r.Rb(h.a))},e.\u0275cmp=r.Lb({type:e,selectors:[["app-template-list"]],outputs:{deleteCount:"deleteCount"},decls:54,vars:13,consts:[[1,"border-b","border-gray-200","pt-2","bg-white"],[1,"flex","justify-between"],[1,"lg:flex","sm:items-baseline"],[1,"text-md","leading-6","font-bold","text-gray-900","lg:px-4","pl-2","lg:text-lg","lg:border-gray-200","lg:border-r"],[1,"mb-2","sm:pb-1","space-x-1","ml-2","text-xxs","lg:text-xs","text-gray-400"],[1,"hover:text-blue-500","cursor-pointer"],[1,"text-xxs","font-mono"],[1,"flex-1","relative","overflow-y-auto","focus:outline-none"],[1,"py-6","relative"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","md:px-8","mt-6"],[1,"bg-white","p-5","md:p-10","rounded"],[1,"text-lg","font-medium","text-gray-800"],[1,"space-y-4"],[1,"flex","flex-col","sm:flex-row","justify-between","pt-6","space-y-2"],[1,"relative","sm:w-1/2"],["type","text","name","name","id","search","placeholder","Search Templates","value","","aria-invalid","true","aria-describedby","name-error",1,"sm:block","flex","w-full","text-xs","py-3","pl-10","text-gray-800","placeholder-gray-300","focus:outline-none","border-gray-100","bg-opacity-60","bg-gray-100","rounded",3,"ngModel","ngModelChange","keyup"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 24 24","version","1.1",1,"w-5","h-5","text-gray-400"],["stroke","none","stroke-width","1","fill","none","fill-rule","evenodd"],["x","0","y","0","width","24","height","24"],["d","M14.2928932,16.7071068 C13.9023689,16.3165825 13.9023689,15.6834175 14.2928932,15.2928932 C14.6834175,14.9023689 15.3165825,14.9023689 15.7071068,15.2928932 L19.7071068,19.2928932 C20.0976311,19.6834175 20.0976311,20.3165825 19.7071068,20.7071068 C19.3165825,21.0976311 18.6834175,21.0976311 18.2928932,20.7071068 L14.2928932,16.7071068 Z","fill","currentColor","fill-rule","nonzero","opacity","0.3"],["d","M11,16 C13.7614237,16 16,13.7614237 16,11 C16,8.23857625 13.7614237,6 11,6 C8.23857625,6 6,8.23857625 6,11 C6,13.7614237 8.23857625,16 11,16 Z M11,18 C7.13400675,18 4,14.8659932 4,11 C4,7.13400675 7.13400675,4 11,4 C14.8659932,4 18,7.13400675 18,11 C18,14.8659932 14.8659932,18 11,18 Z","fill","currentColor","fill-rule","nonzero"],[1,"pt-2","sm:pt-0","w-full","flex","sm:justify-end"],[1,"flex","justify-between","sm:justify-end","space-x-2","text-xs","w-full"],[1,""],[1,"flex","items-center","mr-2"],["href","javascript: void(0)","tooltip","Refresh",1,"relative","text-gray-600","mr-2","p-2","border-transparent","border","bg-gray-100","hover:bg-gray-200","cursor-pointer","rounded","focus:outline-none","focus:ring-2","focus:ring-offset-2","border-indigo-50",3,"options","click"],["viewBox","0 0 24 24","version","1.1",1,"w-5","h-5"],["d","M8.43296491,7.17429118 L9.40782327,7.85689436 C9.49616631,7.91875282 9.56214077,8.00751728 9.5959027,8.10994332 C9.68235021,8.37220548 9.53982427,8.65489052 9.27756211,8.74133803 L5.89079566,9.85769242 C5.84469033,9.87288977 5.79661753,9.8812917 5.74809064,9.88263369 C5.4720538,9.8902674 5.24209339,9.67268366 5.23445968,9.39664682 L5.13610134,5.83998177 C5.13313425,5.73269078 5.16477113,5.62729274 5.22633424,5.53937151 C5.384723,5.31316892 5.69649589,5.25819495 5.92269848,5.4165837 L6.72910242,5.98123382 C8.16546398,4.72182424 10.0239806,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 C7.581722,20 4,16.418278 4,12 L6,12 C6,15.3137085 8.6862915,18 12,18 C15.3137085,18 18,15.3137085 18,12 C18,8.6862915 15.3137085,6 12,6 C10.6885336,6 9.44767246,6.42282109 8.43296491,7.17429118 Z","fill","currentColor","fill-rule","nonzero"],["class","relative",4,"ngIf"],["class","relative text-red-300 p-2 border-transparent border bg-gray-100 rounded",4,"ngIf"],["class","flex",4,"ngIf"],[1,"flex","flex-col","pt-1"],[1,"overflow-x-auto"],[1,"py-2","align-middle","inline-block","min-w-full","pt-3"],[1,"min-w-full","divide-y-0","divide-gray-200"],["class","bg-gray-50 text-xxs font-medium text-gray-400",4,"ngIf"],[3,"colCount",4,"ngIf"],["class","bg-white divide-y divide-gray-100",4,"ngIf"],[3,"Emitter",4,"ngIf"],[3,"title",4,"ngIf"],[3,"title","routePath",4,"ngIf"],[3,"total","totalRecord","p","pagesize","itemsPerPage","perpageCount","paginationValueEmit",4,"ngIf"],[3,"Responce","closePopUp","successPopUp","tryAgainPopUp",4,"ngIf"],[1,"relative"],[3,"deletingLoader","hideshow","confirmationMessage","showModal","deleteModalResponse",4,"ngIf"],["class","absolute text-xxs -top-3 -right-0.5 bg-red-100 p-0.5 rounded-full font-thin text-red-600",4,"ngIf"],[3,"deletingLoader","hideshow","confirmationMessage","showModal","deleteModalResponse"],[1,"absolute","text-xxs","-top-3","-right-0.5","bg-red-100","p-0.5","rounded-full","font-thin","text-red-600"],[1,"relative","text-red-300","p-2","border-transparent","border","bg-gray-100","rounded"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"w-4","h-4"],["stroke","none","d","M0 0h24v24H0z"],["x1","4","y1","7","x2","20","y2","7"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"],[1,"flex"],["routerLink","/templates/new",1,"text-white","md:flex","md:items-center","p-2","pr-2.5","border-transparent","border","bg-blue-600","hover:bg-blue-500","cursor-pointer","rounded","focus:outline-none","focus:ring-2","focus:ring-offset-2","border-indigo-50"],["xmlns","http://www.w3.org/2000/svg",0,"xmlns","xlink","http://www.w3.org/1999/xlink","viewBox","0 0 24 24","version","1.1",1,"w-4","h-4"],["fill","currentColor","x","4","y","11","width","16","height","2","rx","1"],["fill","currentColor","opacity","0.5","transform","translate(12.000000, 12.000000) rotate(-270.000000) translate(-12.000000, -12.000000)","x","4","y","11","width","16","height","2","rx","1"],[1,"ml-1.5","hidden","md:flex"],[1,"bg-gray-50","text-xxs","font-medium","text-gray-400"],["scope","col",1,"px-2","py-2","flex","items-center","text-left","uppercase","tracking-wider"],["id","selectall","name","selectall","type","checkbox","class","focus:ring-indigo-500 h-4 w-4 text-blue-600 bg-white border-gray-300 rounded focus:ring-0",3,"disabled","ngModel","checked","click","ngModelChange",4,"ngIf"],[3,"defaultProperty","colTitle","icon","defaultOrder","sortingProperty","sortingEmitter","iconEmitter"],["scope","col",1,"px-6","py-2","text-left","uppercase","tracking-wider","whitespace-nowrap"],[1,"flex","flex-row","cursor-pointer"],[3,"colTitle","defaultProperty","defaultOrder","icon","sortingProperty","sortingEmitter","iconEmitter"],["scope","col",1,"px-6","py-2","text-center","uppercase","tracking-wider","whitespace-nowrap"],["scope","col",1,"px-6","py-2","text-left","uppercase","tracking-wider"],["id","selectall","name","selectall","type","checkbox",1,"focus:ring-indigo-500","h-4","w-4","text-blue-600","bg-white","border-gray-300","rounded","focus:ring-0",3,"disabled","ngModel","checked","click","ngModelChange"],[3,"colCount"],[1,"bg-white","divide-y","divide-gray-100"],[4,"ngFor","ngForOf"],[1,"px-2","py-2","whitespace-nowrap"],[1,"flex","items-center"],["id","g1","name","g1","type","checkbox","class","focus:ring-indigo-500 h-4 w-4 text-blue-600 bg-opacity-70 border-gray-300 rounded focus:ring-1",3,"checked","click",4,"ngIf"],[1,"ml-6","space-y-0.5"],["tabindex","0",1,"text-sm","font-semibold","text-gray-600","cursor-pointer","rounded","focus:outline-none",3,"click","keydown.enter"],[1,"px-6","py-4"],["id","",1,"text-xs","text-gray-600","whitespace-pre-wrap","ml-6"],[1,"px-6","py-2","whitespace-normal"],[1,"text-xs","font-medium","tracking-wider"],[1,"items-center","justify-center"],["class","inline-flex px-2 justify-center rounded text-xxs font-medium bg-blue-100 text-blue-600 ml-6",4,"ngIf"],["class","inline-flex px-2 justify-center rounded text-xxs font-medium bg-indigo-100 text-indigo-600 ml-6",4,"ngIf"],[1,"px-6","py-2","text-xs","text-gray-700","leading-5","tracking-wide","whitespace-nowrap"],[1,"flex","flex-col","justify-center","items-center"],[1,"px-2","rounded-full"],[1,"px-6","py-2","whitespace-nowrap","text-right","text-sm","font-medium"],["class","text-gray-600 mr-2 p-2 border-transparent border bg-gray-100 hover:bg-gray-200 cursor-pointer rounded focus:outline-none focus:ring-2 focus:ring-offset-2 border-indigo-50","href","javascript: void(0)","tooltip","Edit",3,"options","click",4,"ngIf"],["id","g1","name","g1","type","checkbox",1,"focus:ring-indigo-500","h-4","w-4","text-blue-600","bg-opacity-70","border-gray-300","rounded","focus:ring-1",3,"checked","click"],[1,"inline-flex","px-2","justify-center","rounded","text-xxs","font-medium","bg-blue-100","text-blue-600","ml-6"],[1,"inline-flex","px-2","justify-center","rounded","text-xxs","font-medium","bg-indigo-100","text-indigo-600","ml-6"],["href","javascript: void(0)","tooltip","Edit",1,"text-gray-600","mr-2","p-2","border-transparent","border","bg-gray-100","hover:bg-gray-200","cursor-pointer","rounded","focus:outline-none","focus:ring-2","focus:ring-offset-2","border-indigo-50",3,"options","click"],["d","M9 7 h-3a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h9a2 2 0 0 0 2 -2v-3"],["d","M9 15h3l8.5 -8.5a1.5 1.5 0 0 0 -3 -3l-8.5 8.5v3"],["x1","16","y1","5","x2","19","y2","8"],[3,"Emitter"],[3,"title"],[3,"title","routePath"],[3,"total","totalRecord","p","pagesize","itemsPerPage","perpageCount","paginationValueEmit"],[3,"Responce","closePopUp","successPopUp","tryAgainPopUp"]],template:function(e,t){1&e&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Xb(2,"div",2),r.Xb(3,"h3",3),r.Ic(4," Templates "),r.Wb(),r.Xb(5,"div",4),r.Xb(6,"span",5),r.Ic(7,"Template"),r.Wb(),r.Xb(8,"span",6),r.Ic(9,"/"),r.Wb(),r.Xb(10,"span",5),r.Ic(11,"Template List"),r.Wb(),r.Wb(),r.Wb(),r.Sb(12,"div"),r.Wb(),r.Wb(),r.Xb(13,"main",7),r.Xb(14,"div",8),r.Xb(15,"div",9),r.Xb(16,"div",10),r.Xb(17,"div",11),r.Ic(18,"Templates"),r.Wb(),r.Xb(19,"div",12),r.Xb(20,"div",13),r.Xb(21,"div",14),r.Xb(22,"input",15),r.ec("ngModelChange",function(e){return t.searchText=e})("keyup",function(){return t.getcount()}),r.Wb(),r.Xb(23,"div",16),r.hc(),r.Xb(24,"svg",17),r.Xb(25,"g",18),r.Sb(26,"rect",19),r.Sb(27,"path",20),r.Sb(28,"path",21),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.gc(),r.Xb(29,"div",22),r.Xb(30,"div",23),r.Xb(31,"div",24),r.Xb(32,"div",25),r.Xb(33,"a",26),r.ec("click",function(){return t.onRefresh()}),r.hc(),r.Xb(34,"svg",27),r.Xb(35,"g",18),r.Sb(36,"rect",19),r.Sb(37,"path",28),r.Wb(),r.Wb(),r.Wb(),r.Gc(38,A,3,2,"a",29),r.Gc(39,P,8,0,"a",30),r.Wb(),r.Wb(),r.Gc(40,E,7,0,"div",31),r.Wb(),r.Wb(),r.Wb(),r.gc(),r.Xb(41,"div",32),r.Xb(42,"div",33),r.Xb(43,"div",34),r.Xb(44,"div",24),r.Xb(45,"table",35),r.Gc(46,_,13,21,"thead",36),r.Gc(47,R,1,1,"app-list-skeleton",37),r.Gc(48,z,5,15,"tbody",38),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Gc(49,H,1,0,"app-apierror",39),r.Gc(50,Y,1,1,"app-nodataerror",40),r.Gc(51,K,1,2,"app-nodatacreatenew",41),r.Wb(),r.Gc(52,Z,1,6,"app-file-pagination",42),r.Wb(),r.Wb(),r.Wb(),r.Gc(53,$,1,1,"app-templatedeletepopup",43),r.Wb()),2&e&&(r.Gb(22),r.qc("ngModel",t.searchText),r.Gb(11),r.qc("options",t.myOptions),r.Gb(5),r.qc("ngIf",t.selectAllCount>0&&t.bulkDeleteTempEnable),r.Gb(1),r.qc("ngIf",0==t.selectAllCount&&t.bulkDeleteTempEnable),r.Gb(1),r.qc("ngIf",t.newTempenable),r.Gb(6),r.qc("ngIf",!(t.noRecords||t.recordCount||t.apiError)),r.Gb(1),r.qc("ngIf",t.loader),r.Gb(1),r.qc("ngIf",!(t.noRecords||t.apiError||t.loader)),r.Gb(1),r.qc("ngIf",t.apiError&&!t.loader&&!t.noRecords&&!t.recordCount),r.Gb(1),r.qc("ngIf",t.recordCount&&!(t.noRecords&&!t.loader&&!t.apiError)),r.Gb(1),r.qc("ngIf",t.noRecords),r.Gb(1),r.qc("ngIf",!(t.noRecords||t.recordCount||t.apiError)),r.Gb(1),r.qc("ngIf",t.popUp))},directives:[n.c,n.p,n.r,b.a,s.n,m.a,l.d,u.a,n.a,g.a,s.m,f.a,x.a,w.a,v.a,M],pipes:[o.b,G.a,k],styles:["[_nghost-%COMP%]{display:contents}"]}),e})();var Q=i("lJxs"),ee=i("Nd4H"),te=i("R5K9"),ie=i("TMFe"),se=i("ZOsW");const ne=["ngSelect"];function oe(e,t){1&e&&(r.Xb(0,"label",10),r.Ic(1,"Mobile Column "),r.Xb(2,"span",5),r.Ic(3,"*"),r.Wb(),r.Wb())}function le(e,t){1&e&&(r.Xb(0,"label",10),r.Ic(1,"Mobile Position "),r.Xb(2,"span",5),r.Ic(3,"*"),r.Wb(),r.Wb())}function re(e,t){1&e&&(r.Xb(0,"p",11),r.Ic(1," Mobile Column is required "),r.Wb())}function ae(e,t){if(1&e){const e=r.Yb();r.Xb(0,"form",1),r.Gc(1,oe,4,0,"label",2),r.Gc(2,le,4,0,"label",2),r.Xb(3,"p",3),r.Ic(4),r.Xb(5,"i",4),r.Ic(6," mobile number"),r.Wb(),r.Ic(7," in the uploaded file "),r.Xb(8,"span",5),r.Ic(9,"*"),r.Wb(),r.Wb(),r.Xb(10,"div",6),r.Xb(11,"ng-select",7,8),r.ec("change",function(t){return r.Ac(e),r.ic().onSelectMobCol(t)}),r.Wb(),r.Gc(13,re,2,0,"p",9),r.Wb(),r.Wb()}if(2&e){const e=r.ic();r.qc("formGroup",e.mobileColFormGroup),r.Gb(1),r.qc("ngIf","column"===e.type),r.Gb(1),r.qc("ngIf","index"===e.type),r.Gb(2),r.Kc(" Choose the ",e.type," which represents "),r.Gb(7),r.qc("placeholder",e.placeholder)("items",e.mobileColumns),r.Gb(2),r.qc("ngIf",e.mobileCol.touched&&(null==e.mobileCol.errors?null:e.mobileCol.errors.required))}}let ce=(()=>{class e{constructor(e,t){this.templateSvc=e,this.controlContainer=t,this.mobileColInfoTxt=c.a.INFO_TXT.templateMobileColumn,this.mobileColumnResponse=new r.q,this.placeholder="Select Mobile Number Column"}ngOnInit(){this.type=this.templateSvc.getBasedOn(),this.mobileColFormGroup=this.controlContainer.control,this.fileDetails=this.templateSvc.getFirstFileDetails(),this.fileDetails&&(this.type=this.templateSvc.basedOn,this.placeholder="Select Mobile Number "+this.type,this.mobileColumns="index"===this.type?this.fileDetails.file_contents_index[0]:this.fileDetails.file_contents_column[0],this.mobileColFormGroup.controls.mobileColumn.setValue(null));const e=this.templateSvc.getNewTemplate();this.setFirstOrPreviousValue(e.t_mobile_column),this.subscriptionFile=this.templateSvc.getBasedOn().subscribe(t=>{this.type=t,this.placeholder="Select Mobile Number "+t,"column"===t?(this.mobileColumns=this.fileDetails.file_contents_column[0],this.setFirstOrPreviousValue(e.t_mobile_column)):"index"===t&&(this.mobileColumns=this.fileDetails.file_contents_index[0],this.setFirstOrPreviousValue(e.t_mobile_column))})}setFirstOrPreviousValue(e){let t=null;this.mobileColumns.includes(e)?t=e:(this.mobileColFormGroup.controls.mobileColumn.markAsUntouched(),t=null),this.mobileColFormGroup.controls.mobileColumn.setValue(t),null!==t&&this.mobileColumnResponse.emit(t)}onSelectMobCol(e){this.mobileColumnResponse.emit(e),this.templateSvc.populateNewTemplateMobileCol(e)}get mobileCol(){return this.mobileColFormGroup.controls.mobileColumn}ClearValue(){this.ngSelect.handleClearClick()}setFocus(){this.ngSelect.focus()}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(ie.a),r.Rb(n.b))},e.\u0275cmp=r.Lb({type:e,selectors:[["app-select-mobile-column"]],viewQuery:function(e,t){if(1&e&&r.Nc(ne,1),2&e){let e;r.xc(e=r.fc())&&(t.ngSelect=e.first)}},outputs:{mobileColumnResponse:"mobileColumnResponse"},decls:1,vars:1,consts:[[3,"formGroup",4,"ngIf"],[3,"formGroup"],["for","mobile","class","block font-semibold text-gray-700",4,"ngIf"],[1,"mt-1","text-xxs","sm:text-xs","text-gray-500"],[1,""],[1,"text-red-600"],[1,"my-2","block","w-full","sm:w-1/2"],["id","mobilecolumnId","name","mobileColumn","formControlName","mobileColumn","autocomplete","mobileColumn",1,"shadow-sm","text-xs","invalid:text-red-400","text-gray-700","focus:ring-indigo-500","focus:border-indigo-500","w-full","border-gray-300","rounded-md",3,"placeholder","items","change"],["ngSelect",""],["class","mt-2 text-xxs sm:text-xs text-red-600",4,"ngIf"],["for","mobile",1,"block","font-semibold","text-gray-700"],[1,"mt-2","text-xxs","sm:text-xs","text-red-600"]],template:function(e,t){1&e&&r.Gc(0,ae,14,7,"form",0),2&e&&r.qc("ngIf",t.mobileColFormGroup)},directives:[s.n,n.v,n.q,n.k,se.a,n.p,n.i],styles:["[_nghost-%COMP%]{display:contents}"]}),e})();var pe=i("cFw7"),de=i("EXwP");function he(e,t){1&e&&(r.Xb(0,"label",8),r.Ic(1," Static "),r.Wb())}function be(e,t){1&e&&(r.Xb(0,"label",8),r.Ic(1," Dynamic "),r.Wb())}function me(e,t){1&e&&(r.Xb(0,"label",8),r.Ic(1," Text "),r.Wb())}function ue(e,t){1&e&&(r.Xb(0,"label",8),r.Ic(1," Unicode "),r.Wb())}function ge(e,t){if(1&e){const e=r.Yb();r.Xb(0,"button",9),r.ec("click",function(){return r.Ac(e),r.ic(2).openModal()}),r.hc(),r.Xb(1,"svg",10),r.Sb(2,"path",11),r.Wb(),r.Ic(3," Clear "),r.Wb()}}function fe(e,t){if(1&e&&(r.Xb(0,"div",12),r.Xb(1,"div",13),r.Xb(2,"div",14),r.Ic(3),r.Wb(),r.Wb(),r.Wb()),2&e){const e=r.ic(2);r.Gb(3),r.Kc(" ",e.templateMsg," ")}}function xe(e,t){1&e&&(r.Xb(0,"div",20),r.Xb(1,"div",21),r.Xb(2,"div",22),r.Sb(3,"div",23),r.Xb(4,"div",24),r.Xb(5,"p",25),r.Ic(6,"Warning! "),r.Xb(7,"span",26),r.Ic(8,"Your are changing the original content of the template"),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb())}function we(e,t){1&e&&(r.Xb(0,"p",27),r.Ic(1," Template Message is required "),r.Wb())}function ve(e,t){if(1&e&&(r.Xb(0,"p",28),r.Ic(1),r.Wb()),2&e){const e=r.ic(3);r.Gb(1),r.Kc(" ",e.msgInfoText," ")}}const ye=function(e){return{"border-red-300":e}};function Ce(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",12),r.Xb(1,"div",15),r.Xb(2,"textarea",16),r.ec("keyup",function(t){return r.Ac(e),r.ic(2).onKeyPress(t)})("paste",function(t){return r.Ac(e),r.ic(2).onBlurEvent(t)}),r.Ic(3,"\n                "),r.Wb(),r.Gc(4,xe,9,0,"div",17),r.Wb(),r.Gc(5,we,2,0,"p",18),r.Gc(6,ve,2,1,"p",19),r.Wb()}if(2&e){const e=r.ic(2);r.Gb(2),r.qc("ngClass",r.tc(4,ye,e.newmessage.touched&&e.newmessage.errors)),r.Gb(2),r.qc("ngIf",e.checking),r.Gb(1),r.qc("ngIf",(null==e.newmessage.errors?null:e.newmessage.errors.minLengthInvalid)||e.newmessage.touched&&(null==e.newmessage.errors?null:e.newmessage.errors.required)),r.Gb(1),r.qc("ngIf",!e.newmessage.touched&&(null==e.newmessage.errors?null:e.newmessage.errors.required)||!e.newmessage.errors)}}function Ie(e,t){if(1&e&&(r.Xb(0,"form",2),r.Xb(1,"div",3),r.Xb(2,"nav",4),r.Gc(3,he,2,0,"label",5),r.Gc(4,be,2,0,"label",5),r.Gc(5,me,2,0,"label",5),r.Gc(6,ue,2,0,"label",5),r.Wb(),r.Gc(7,ge,4,0,"button",6),r.Wb(),r.Gc(8,fe,4,1,"div",7),r.Gc(9,Ce,7,6,"div",7),r.Wb()),2&e){const e=r.ic();r.qc("formGroup",e.newTemplateMsgFormGroup),r.Gb(3),r.qc("ngIf",e.msgType),r.Gb(1),r.qc("ngIf",!e.msgType),r.Gb(1),r.qc("ngIf",!e.Unicode),r.Gb(1),r.qc("ngIf",e.Unicode),r.Gb(1),r.qc("ngIf",e.templateMsg.length>0&&!e.msgType),r.Gb(1),r.qc("ngIf",1==e.apiIsStaticFlag&&e.templateMsg.length>0),r.Gb(1),r.qc("ngIf",0==e.apiIsStaticFlag)}}function Te(e,t){if(1&e){const e=r.Yb();r.Xb(0,"app-clear-modal",29),r.ec("clearModalResponse",function(t){return r.Ac(e),r.ic().clearModalResponse(t)}),r.Wb()}2&e&&r.qc("title","Clear Message")("confirmationMessage","Are you sure you want to clear out message area?")("confirmLable","Clear")}let We=(()=>{class e{constructor(e,t,i){this.templateSvc=e,this.tempservice=t,this.controlContainer=i,this.campaignMsgInfoTxt=c.a.INFO_TXT.campaignMessage,this.campaignLangInfoTxt=c.a.INFO_TXT.campaignLanguage,this.noUnicodeTxt=c.a.ERROR_DISPLAY.noUnicodeText,this.colBasedInfoTxt=c.a.INFO_TXT.templateColBased,this.indexBasedInfoTxt=c.a.INFO_TXT.templateIndexBased,this.msgInfoText="",this.type="column",this.showFileContents=!1,this.dir="ltr",this.openClearModal=!1,this.source="message",this.isText=!0,this.totalCharCount=0,this.newLineCount=0,this.partsCount=0,this.regExHeadersFromMsg=c.a.TEMPLATE_VAR_PATTERN,this.regExHeadersFromMsgForApi=c.a.MSG_CURLY_REMOVE_PATTERN,this.templateMsgChg=new r.q,this.templateLangType=new r.q,this.isStaticEmit=new r.q}ngOnChanges(e){this.fileUploaded||(this.showFileContents=!1),this.newTemplateMsgFormGroup=this.controlContainer.control,this.templateMsg&&this.msgpartcount(this.templateMsg),this.newTemplateMsgFormGroup&&this.newTemplateMsgFormGroup.controls.newmessage.setValue(this.templateMsg),this.staticCheck()}ngOnInit(){this.msgInfoText=this.colBasedInfoTxt,this.newTemplateMsgFormGroup.controls.newmessage.setValue(this.templateMsg),this.prevMessageValue=this.templateMsg,this.subscriptionFile=this.templateSvc.getBasedOn().subscribe(e=>{"column"===e?(this.msgInfoText=this.colBasedInfoTxt,this.type="column"):"index"===e&&(this.msgInfoText=this.indexBasedInfoTxt,this.type="index")}),this.newTemplateMsgFormGroup.get("newmessage").valueChanges.subscribe(e=>{const t=this.regExHeadersFromMsg;let i=this.SelectedMsg.replace(t,"/"),s=e.replace(t,"/");console.log(i,"old"),console.log(s,"new"),this.checking=s!==i}),this.dlt.valueChanges.pipe().subscribe(e=>{this.checking=!1})}get newmessage(){return this.newTemplateMsgFormGroup.controls.newmessage}get language(){return this.newTemplateMsgFormGroup.controls.language}get dlt(){return this.newTemplateMsgFormGroup.controls.dlt}openModal(){this.openClearModal=!0}clearModalResponse(e){this.openClearModal=!1,"clear"===e&&(this.Unicode=!1,this.showFileContents=!1,this.newTemplateMsgFormGroup.controls.newmessage.setValue(""),this.newTemplateMsgFormGroup.controls.isStatic.setValue(!0),this.templateMsgChg.emit(""))}onToggleShow(e){this.showFileContents=e}switchToUnicode(){this.isText=!1}switchToText(){this.isText=!0,this.dir="ltr"}onKeyPress(e){const t=e.target.value;this.staticCheck(),this.newTemplateMsgFormGroup.controls.newmessage.setValue(t),this.isText&&escape(t.charAt(t.length-1)).startsWith("%u"),this.templateMsgChg.emit(t),this.totalCharCount=t.length}onBlurEvent(e){const t=e.target.value;for(let i=0;i<t.length;i++)this.isText&&escape(t.charAt(i)).startsWith("%u")||this.newTemplateMsgFormGroup.controls.newmessage.setValue(t),this.templateMsgChg.emit(t);this.totalCharCount=t.length}onItemChange(e){"Arabic"===e.target.value&&(this.dir="rtl")}onHeaderClick(e){const t=document.getElementById("newmessage");t.focus();const i=this.templateSvc.onHeaderClick(e,t,this.newTemplateMsgFormGroup);this.templateMsgChg.emit(i),this.totalCharCount=t.value.length}msgpartcount(e){let t=e.trim();this.staticCheck();let i=t.replace(this.regExHeadersFromMsgForApi,"").trim();i.length>0&&this.tempservice.getMsgPartsInfo(i).subscribe(e=>{e.statusCode>299||e.statusCode<200||(1==e.isUnicode?(this.Unicode=!0,this.templateLangType.emit("Unicode")):(this.Unicode=!1,this.templateLangType.emit("Text")))},e=>e)}focus(){document.getElementById("newmessage").focus()}ngOnDestroy(){this.subscriptionFile&&this.subscriptionFile.unsubscribe()}toggleFileContent(){this.showFileContents=!this.showFileContents}staticCheck(){this.msg.match(this.regExHeadersFromMsg)?this.newTemplateMsgFormGroup.controls.isStatic.setValue(!1):this.newTemplateMsgFormGroup.controls.isStatic.setValue(!0)}get msgType(){return this.newTemplateMsgFormGroup.controls.isStatic.value}get msg(){return this.newTemplateMsgFormGroup.controls.newmessage.value}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(ie.a),r.Rb(h.a),r.Rb(n.b))},e.\u0275cmp=r.Lb({type:e,selectors:[["app-create-new-template-message"]],inputs:{templateMsg:"templateMsg",apiIsStaticFlag:"apiIsStaticFlag",SelectedMsg:"SelectedMsg",entityId:"entityId",fileUploaded:"fileUploaded"},outputs:{templateMsgChg:"templateMsgChg",templateLangType:"templateLangType",isStaticEmit:"isStaticEmit"},features:[r.Eb],decls:2,vars:2,consts:[[3,"formGroup",4,"ngIf"],[3,"title","confirmationMessage","confirmLable","clearModalResponse",4,"ngIf"],[3,"formGroup"],[1,"flex","justify-between","items-center"],[1,"flex","justify-end","space-x-1"],["class","inline-flex items-center px-2 py-0.5 text-xs leading-4 font-normal tracking-wide rounded text-green-600 bg-gray-100 focus:outline-none",4,"ngIf"],["type","button","class","inline-flex items-center ml-2 px-1 py-1 text-medium leading-4 font-medium tracking-wide rounded-md text-red-600 hover:underline focus:outline-none",3,"click",4,"ngIf"],["class","mt-3",4,"ngIf"],[1,"inline-flex","items-center","px-2","py-0.5","text-xs","leading-4","font-normal","tracking-wide","rounded","text-green-600","bg-gray-100","focus:outline-none"],["type","button",1,"inline-flex","items-center","ml-2","px-1","py-1","text-medium","leading-4","font-medium","tracking-wide","rounded-md","text-red-600","hover:underline","focus:outline-none",3,"click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-3","w-3"],["fill-rule","evenodd","d","M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z","clip-rule","evenodd"],[1,"mt-3"],[1,"mt-4","space-y-2"],[1,"bg-blue-50","text-blue-500","p-2","whitespace-pre-wrap"],[1,"mt-0"],["id","newmessage","name","newmessage","formControlName","newmessage","rows","5","placeholder","Enter template message",1,"shadow-sm","placeholder-gray-300","focus:ring-indigo-500","text-gray-700","focus:border-indigo-500","block","w-full","text-xs","border-gray-300","rounded-md",3,"ngClass","keyup","paste"],["class","sm:col-span-6 text-xs pt-4",4,"ngIf"],["class","mt-2 text-xxs sm:text-xs text-red-600","id","name-error",4,"ngIf"],["class","mt-2 text-xxs sm:text-xs text-gray-500",4,"ngIf"],[1,"sm:col-span-6","text-xs","pt-4"],[1,"rounded-md","bg-yellow-50","p-2","mt-4","border","border-yellow-400","border-dashed"],[1,"flex","items-center"],[1,"flex-shrink-0"],[1,"ml-3","flex-1","md:flex","md:justify-between"],[1,"text-xs","text-gray-500","font-medium"],[1,"italic","font-semibold"],["id","name-error",1,"mt-2","text-xxs","sm:text-xs","text-red-600"],[1,"mt-2","text-xxs","sm:text-xs","text-gray-500"],[3,"title","confirmationMessage","confirmLable","clearModalResponse"]],template:function(e,t){1&e&&(r.Gc(0,Ie,10,8,"form",0),r.Gc(1,Te,1,3,"app-clear-modal",1)),2&e&&(r.qc("ngIf",t.newTemplateMsgFormGroup),r.Gb(1),r.qc("ngIf",t.openClearModal))},directives:[s.n,n.v,n.q,n.k,n.c,n.p,n.i,s.l,de.a],styles:[""]}),e})();var Xe=i("KdLM"),Se=i("wgGn");function Me(e,t){1&e&&(r.hc(),r.Xb(0,"svg",9),r.Sb(1,"path",10),r.Wb())}function Ge(e,t){if(1&e){const e=r.Yb();r.Xb(0,"form",2),r.Xb(1,"div",3),r.Xb(2,"label",4),r.Ic(3,"Select DLT Template "),r.Xb(4,"span",5),r.Ic(5,"*"),r.Wb(),r.Wb(),r.Sb(6,"input",6),r.Xb(7,"button",7),r.ec("click",function(){return r.Ac(e),r.ic().showTemplateSlider()}),r.Gc(8,Me,2,0,"svg",8),r.Ic(9),r.Wb(),r.Wb(),r.Wb()}if(2&e){const e=r.ic();r.qc("formGroup",e.templateFormGroup),r.Gb(7),r.qc("ngClass",e.textcolor),r.Gb(1),r.qc("ngIf","Choose"==e.Action),r.Gb(1),r.Kc(" ",e.Action," ")}}function ke(e,t){if(1&e){const e=r.Yb();r.Xb(0,"app-existing-templates-slider",11),r.ec("closeSlider",function(){return r.Ac(e),r.ic().closeSlider()})("emitSelectedTemplate",function(t){return r.Ac(e),r.ic().responseTemplate(t)})("changeEevent",function(t){return r.Ac(e),r.ic().responseTemplate(t)}),r.Wb()}if(2&e){const e=r.ic();r.qc("inTemplate","createTemp")("entity_Id",e.entityId)("choosen_dlt_id",e.Dlt_template_ID)}}let Fe=(()=>{class e{constructor(e,t){this.templateSvc=e,this.controlContainer=t,this.fileError=!1,this.isShowTemplateSlider=!1,this.showPreview=!1,this.textcolor="text-blue-600",this.Action="Choose",this.noEntityId=new r.q,this.clickSelect=new r.q,this.choosenTemplate=new r.q,this.choosenDltTemplate=new r.q,this.selectedDLT=new r.q,this.templateMsgChg=new r.q,this.changeEvent=new r.q}ngOnInit(){this.templateFormGroup=this.controlContainer.control}ngOnChanges(e){e.entityId&&(this.Action="Choose",this.textcolor="text-blue-600"),e.templateMsg&&""==e.templateMsg.currentValue&&(this.Action="Choose",this.textcolor="text-blue-600")}showTemplateSlider(){this.clickSelect.emit(),null==this.entityId?this.noEntityId.emit(!0):this.isShowTemplateSlider=!0}changeOrEditResponse(){this.isShowTemplateSlider=!0}responseTemplate(e){"createTemp"===this.inTemplate?(this.Action="Change",this.selectedDltTemplate=e,this.showPreview=!0,this.textcolor="text-red-600",this.choosenDltTemplate.emit(this.selectedDltTemplate),this.Dlt_template_ID=this.selectedDltTemplate.dlt_template_id):(this.Action="Change",this.selectedTemplate=e,this.showPreview=!0,this.choosenTemplate.emit(this.selectedTemplate),this.Dlt_template_ID=this.selectedTemplate.dlt_template_id)}get templatev(){return this.templateFormGroup.controls.template}closeSlider(){this.isShowTemplateSlider=!1}clearTemplate(){this.choosenTemplate.emit()}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(ie.a),r.Rb(n.b))},e.\u0275cmp=r.Lb({type:e,selectors:[["app-select-dlt-template"]],inputs:{campaignType:"campaignType",inTemplate:"inTemplate",entityId:"entityId",templateMsg:"templateMsg",previewIndexOrColumn:"previewIndexOrColumn"},outputs:{noEntityId:"noEntityId",clickSelect:"clickSelect",choosenTemplate:"choosenTemplate",choosenDltTemplate:"choosenDltTemplate",selectedDLT:"selectedDLT",templateMsgChg:"templateMsgChg",changeEvent:"changeEvent"},features:[r.Eb],decls:2,vars:2,consts:[[3,"formGroup",4,"ngIf"],[3,"inTemplate","entity_Id","choosen_dlt_id","closeSlider","emitSelectedTemplate","changeEevent",4,"ngIf"],[3,"formGroup"],[1,"flex","justify-between","items-center"],["for","mobile",1,"block","font-semibold","text-gray-700"],[1,"text-red-600"],["type","hidden","name","template","formControlName","dlt"],["type","button",1,"inline-flex","items-center","px-1","py-1.5","text-normal","leading-4","font-small","tracking-wide","rounded-md","text-blue-600","bg-white","hover:underline","focus:outline-none",3,"ngClass","click"],["class","h-4 w-4","xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","stroke","none",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor","stroke","none",1,"h-4","w-4"],["fill-rule","evenodd","d","M10 5a1 1 0 011 1v3h3a1 1 0 110 2h-3v3a1 1 0 11-2 0v-3H6a1 1 0 110-2h3V6a1 1 0 011-1z","clip-rule","evenodd"],[3,"inTemplate","entity_Id","choosen_dlt_id","closeSlider","emitSelectedTemplate","changeEevent"]],template:function(e,t){1&e&&(r.Gc(0,Ge,10,4,"form",0),r.Gc(1,ke,1,3,"app-existing-templates-slider",1)),2&e&&(r.qc("ngIf",t.templateFormGroup),r.Gb(1),r.qc("ngIf",!t.fileError&&t.isShowTemplateSlider))},directives:[s.n,n.v,n.q,n.k,n.c,n.p,n.i,s.l,Se.a],styles:[""]}),e})();var qe=i("X0Uo"),Ae=i("iaih");function Pe(e,t){1&e&&(r.hc(),r.Xb(0,"svg",3),r.Sb(1,"circle",4),r.Sb(2,"path",5),r.Wb())}function Ee(e,t){if(1&e){const e=r.Yb();r.Xb(0,"app-create-popup",6),r.ec("closePopUp",function(t){return r.Ac(e),r.ic().modalClose(t)})("successPopUp",function(t){return r.Ac(e),r.ic().modalcontinue(t)})("tryAgainPopUp",function(t){return r.Ac(e),r.ic().tryAgain(t)}),r.Wb()}if(2&e){const e=r.ic();r.qc("@openClose",void 0)("inputForm",e.newTemplateForm)("Responce",e.Responce)("status",e.status)}}let De=(()=>{class e{constructor(e,t,i){this.templCampaignSvc=e,this.router=t,this.tService=i,this.spinner=!1,this.popup=!1}ngOnInit(){}ngOnChanges(){}onCreate(){console.log(this.newTemplateForm),this.tService.validateTemplateFormFields(this.newTemplateForm),this.onSubmit()}onSubmit(){"Create"===this.title?this.newTemplate():this.updateTemplate()}newTemplate(){if(this.newTemplateForm.valid&&!this.templCampaignSvc.templateErr){this.unicode=0==this.newTemplateForm.controls.patternType.value?0:1;let e={t_name:this.newTemplateForm.controls.templateName.value,t_type:this.newTemplateForm.controls.basedOn.value,t_mobile_column:this.newTemplateForm.controls.mobileColumn.value,dlt_entity_id:this.newTemplateForm.controls.entityId.value,dlt_template_id:this.newTemplateForm.controls.dlt.value,pattern_type:this.newTemplateForm.controls.patternType.value,t_content:this.newTemplateForm.controls.newmessage.value,is_static:+this.newTemplateForm.controls.isStatic.value,is_unicode:this.unicode};this.spinner=!0,this.tService.createTemplate(e).subscribe(e=>{201===e.statusCode&&(this.Responce=e,this.status=e.message,this.popup=!0,this.spinner=!1),-410===e.statusCode&&(this.Responce=e,this.status=e.message,this.spinner=!1,this.popup=!0)},e=>{let t=this.tService.badError;this.Responce=t,this.status=t.message,this.popup=!0,this.spinner=!1})}}updateTemplate(){this.newTemplateForm.valid&&!this.templCampaignSvc.templateErr&&this.tService.templateUpdate(this.newTemplateForm.value).subscribe(e=>{(200===e.statusCode||e.statusCode>200)&&(this.Responce=e,this.status=e.message,this.popup=!0,this.spinner=!1)},e=>{let t=this.tService.badError;this.Responce=t,this.status=t.message,this.popup=!0,this.spinner=!1})}modalClose(e){this.popup=!1,this.spinner=!1}tryAgain(e){let t={message:"Please Wait Some Time",statusCode:100,error:" HTTP Server Timed Out"};this.Responce=t,this.status=t.message,this.popup=!0,this.spinner=!0,this.onSubmit()}modalcontinue(e){this.popup=!1,this.router.navigate(["/templates"])}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(ie.a),r.Rb(l.c),r.Rb(h.a))},e.\u0275cmp=r.Lb({type:e,selectors:[["app-template-create-button"]],inputs:{newTemplateForm:"newTemplateForm",title:"title",enableButton:"enableButton"},features:[r.Eb],decls:4,vars:5,consts:[["type","submit",1,"md:ml-3","inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","focus:outline-none","focus:ring-2","focus:ring-offset-2","border-blue-50",3,"disabled","ngClass","click"],["class","animate-spin h-5 w-5 text-white ml-2","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",4,"ngIf"],[3,"inputForm","Responce","status","closePopUp","successPopUp","tryAgainPopUp",4,"ngIf"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-white","ml-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[3,"inputForm","Responce","status","closePopUp","successPopUp","tryAgainPopUp"]],template:function(e,t){1&e&&(r.Xb(0,"button",0),r.ec("click",function(){return t.onCreate()}),r.Ic(1),r.Gc(2,Pe,3,0,"svg",1),r.Wb(),r.Gc(3,Ee,1,4,"app-create-popup",2)),2&e&&(r.qc("disabled",!t.enableButton||t.spinner)("ngClass",t.enableButton?"bg-indigo-600 hover:bg-indigo-700 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500":"bg-indigo-500 opacity-50 cursor-not-allowed focus:outline-none"),r.Gb(1),r.Kc(" ",t.title," "),r.Gb(1),r.qc("ngIf",t.spinner&&t.newTemplateForm.valid),r.Gb(1),r.qc("ngIf",t.popup))},directives:[s.l,s.n,Ae.a],styles:["[_nghost-%COMP%]{display:contents}"],data:{animation:[y.f]}}),e})();var _e=i("LAqx"),Re=i("tk/3"),Ue=i("EMKY"),Oe=i("ZtwD");function Le(e,t){if(1&e&&(r.Xb(0,"div",12),r.hc(),r.Xb(1,"svg",13),r.Sb(2,"path",14),r.Sb(3,"path",15),r.Sb(4,"path",16),r.Sb(5,"path",17),r.Sb(6,"path",18),r.Wb(),r.gc(),r.Xb(7,"p",19),r.Ic(8),r.Wb(),r.Wb()),2&e){const e=r.ic();r.Gb(7),r.rc("tooltip",e.fileName),r.qc("options",e.myOptions),r.Gb(1),r.Kc(" ",e.fileName," ")}}function Be(e,t){if(1&e&&r.Sb(0,"div",30),2&e){const e=r.ic(3);r.Fc("width",e.progressBarWidth,"%")}}const Ve=function(e,t){return{"font-medium":e,"font-normal":t}};function je(e,t){if(1&e&&(r.Xb(0,"div",24),r.Xb(1,"div",25),r.Gc(2,Be,1,2,"div",26),r.Sb(3,"div",27),r.Wb(),r.Xb(4,"div",28),r.Sb(5,"span",29),r.Wb(),r.Wb()),2&e){const e=r.ic(2);r.Gb(2),r.qc("ngIf","failure"!=e.status),r.Gb(3),r.qc("ngClass",r.uc(2,Ve,"success"===e.status,"failure"===e.status))}}function Ne(e,t){if(1&e){const e=r.Yb();r.Xb(0,"a",34),r.ec("click",function(){return r.Ac(e),r.ic(3).cancel()}),r.hc(),r.Xb(1,"svg",35),r.Sb(2,"path",36),r.Wb(),r.Wb()}if(2&e){const e=r.ic(3);r.qc("options",e.myOptions)}}function ze(e,t){if(1&e&&(r.Xb(0,"div",31),r.Xb(1,"p",32),r.Ic(2),r.Wb(),r.Gc(3,Ne,3,1,"a",33),r.Wb()),2&e){const e=r.ic(2);r.Gb(2),r.Kc(" ",e.progressBarWidth,"% "),r.Gb(1),r.qc("ngIf",!e.cancelModal)}}function He(e,t){if(1&e&&(r.Xb(0,"div",40),r.Xb(1,"div",31),r.Xb(2,"p",41),r.Ic(3," success "),r.Wb(),r.Xb(4,"span",42),r.Ic(5),r.jc(6,"number"),r.Wb(),r.Wb(),r.Wb()),2&e){const e=r.ic(3);r.Gb(5),r.Mc(" \u2022 ",e.tooltip," \u2022 ",e.progressTextContent," (",r.kc(6,3,e.totalSize),") total ")}}function Ye(e,t){if(1&e){const e=r.Yb();r.Xb(0,"a",45),r.ec("click",function(){return r.Ac(e),r.ic(4).removeButtonClicked()}),r.hc(),r.Xb(1,"svg",46),r.Sb(2,"path",47),r.Sb(3,"line",48),r.Sb(4,"line",49),r.Sb(5,"line",50),r.Sb(6,"path",51),r.Sb(7,"path",52),r.Wb(),r.Wb()}if(2&e){const e=r.ic(4);r.qc("options",e.myOptions)}}function Ke(e,t){if(1&e&&(r.Xb(0,"div",43),r.Gc(1,Ye,8,1,"a",44),r.Wb()),2&e){const e=r.ic(3);r.Gb(1),r.qc("ngIf","success"===e.status&&e.cancelModal)}}function Ze(e,t){if(1&e&&(r.Xb(0,"div",37),r.Gc(1,He,7,5,"div",38),r.Gc(2,Ke,2,1,"div",39),r.Wb()),2&e){const e=r.ic(2);r.Gb(1),r.qc("ngIf",e.cancelModal),r.Gb(1),r.qc("ngIf",e.cancelModal)}}function $e(e,t){if(1&e&&(r.Xb(0,"div",20),r.Gc(1,je,6,5,"div",21),r.Gc(2,ze,4,2,"div",22),r.Gc(3,Ze,3,2,"div",23),r.Wb()),2&e){const e=r.ic();r.Gb(1),r.qc("ngIf",!e.cancelModal),r.Gb(1),r.qc("ngIf",!e.cancelModal),r.Gb(1),r.qc("ngIf",e.cancelModal)}}function Je(e,t){if(1&e&&(r.Xb(0,"div",56),r.Xb(1,"p",57),r.Ic(2),r.Wb(),r.Wb()),2&e){const e=r.ic(2);r.Gb(2),r.Kc(" ",e.errorMsg," ")}}function Qe(e,t){if(1&e&&(r.Xb(0,"div",20),r.Xb(1,"div",53),r.Xb(2,"p",54),r.Ic(3," Upload failed "),r.Wb(),r.Wb(),r.Gc(4,Je,3,1,"div",55),r.Wb()),2&e){const e=r.ic();r.Gb(4),r.qc("ngIf","failure"==e.status)}}let et=(()=>{class e{constructor(e,t,i,s){this.uploadSvc=e,this.utilitySvc=t,this.templateCt=i,this.controlContainer=s,this.fileName="",this.responseEmitter=new r.q,this.progressBarWidth=0,this.status="",this.openClearModal=!1,this.fileUpload=!1,this.cancelModal=!1,this.FILE_SIZE_LIMIT=c.a.singleFileMaxSize,this.fileReqdText=c.a.REQD_TEXT.singleFileUpload,this.fileInfoText=c.a.INFO_TXT.singleFileUpload,this.myOptions=c.b,this.httpOptions={headers:new Re.e({"Content-Type":"application/json"})}}ngOnChanges(){console.log("inside ngonchanges .....",this.fileUpload),"reset"==this.fileUpload&&(console.log("inside if ....."),this.fileUpload=!1)}ngOnInit(){const e=this.templateCt.getFirstFileDetails();null!=e&&null!=e&&" "!=e?(console.log(this.existFile),this.fileUpload="file uploaded",this.file=this.existFile,this.fileSize=this.existFile.filesize,this.fileName=this.existFile.filename,this.cancelModal=!0,this.status="success",this.progressTextContent=this.existFile.count_human,this.totalSize=Number(this.existFile.count),this.tooltip=this.fileSize):this.fileUpload=!1}onChange(e){if(console.log(e),this.fileSize=0,this.status="success",this.file=e.target.files[0],this.uploadSvc.uploadedSingleFile(e),this.cancelModal=!1,this.fileSize=this.file.size,"application/x-zip-compressed"==this.file.type)this.fileUpload=!1,this.status="failure",this.fileName="zip-compressed",this.handleError("Un supported Format ");else if("text/plain"==this.file.type)this.fileUpload=!1,this.status="failure",this.fileName="txt file",this.handleError("Un supported Format ");else if("0"==e.count)this.fileUpload=!1,this.status="failure",this.fileName=e.filename,console.log(this.fileName),this.handleError("Zero Contact File ");else{(new FileReader).onload=e=>{};const e=JSON.parse(localStorage.getItem("user")).user;this.fileName=this.file.name;const t=new FormData;t.append("frompage","template"),t.append("username",e),t.append("file",this.file),this.fileUpload=!0,console.log(this.fileName,"1"),this.subscription2=this.uploadSvc.uploadWithProgress(t).subscribe(e=>{if(e.type==Re.d.UploadProgress)Math.round(100*e.loaded/e.total),this.progressBarWidth=Math.round(100*e.loaded/e.total),this.progressTextContent=`${Math.round(100*e.loaded/e.total)}%`;else if(e instanceof Re.h)if(200===e.status&&void 0===e.body.code)if("0"==e.body.count)this.cancelModal=!1,this.fileUpload=!1,this.status="failure",this.handleError("zero contact file");else{this.fileUpload=!0,console.log(this.fileName,"2"),this.cancelModal=!0,this.progressTextContent=e.body.count_human,this.totalSize=e.body.count,this.tooltip=this.formatBytes(this.fileSize),e.body.filesize=this.tooltip;var t=e.body;this.status="success",this.responseEmitter.emit(t)}else this.cancelModal=!1,this.fileUpload=!1,this.status="failure",this.handleError(e.body.message)},e=>{this.fileUpload=!1,this.cancelModal=!1,this.handleError("Server error")})}}openModal(){this.openClearModal=!0}clearModalResponse(e){"clear"===e&&(this.removeButtonClicked(),this.openClearModal=!1),"close"===e&&(this.openClearModal=!1)}handleError(e){this.status="failure",this.errorMsg=e,this.responseEmitter.emit("error")}onClickUploadFile(){this.file=null,document.getElementById("fileId")&&document.getElementById("fileId").click()}clearUploadedFile(){var e,t;console.log(this.fileName,"inside clear file");const i=this.uploadSvc.getUploadedSingleFile();if(this.removeButtonClicked(),i){this.file=i.target.files[0],this.fileSize=this.file.size,this.fileName=this.file.name,this.cancelModal=!0,this.progressTextContent=null===(e=i.body)||void 0===e?void 0:e.count_human,this.totalSize=null===(t=i.body)||void 0===t?void 0:t.count,this.tooltip=this.formatBytes(this.fileSize);var s=i.body;this.status="success",this.responseEmitter.emit(s),console.log(i.target.files[0])}}removeButtonClicked(){this.progressBarWidth=0,this.fileUpload=!1,this.fileSize=0,this.file=[" "],this.subscription2&&this.subscription2.unsubscribe(),this.responseEmitter.emit("error")}cancel(){this.progressBarWidth=0,this.fileSize=0,this.file=[" "],this.fileUpload=!1,this.cancelModal=!0,this.status="failure",this.errorMsg="Upload canceled",this.subscription2&&this.subscription2.unsubscribe(),this.responseEmitter.emit("error")}ngOnDestroy(){this.subscription2&&this.subscription2.unsubscribe()}formatBytes(e,t=2){if(0===e)return"0 Bytes";const i=t<0?0:t,s=Math.floor(Math.log(e)/Math.log(1024));return`${parseFloat((e/Math.pow(1024,s)).toFixed(i))} ${["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"][s]}`}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(Ue.a),r.Rb(Oe.a),r.Rb(ie.a),r.Rb(n.b))},e.\u0275cmp=r.Lb({type:e,selectors:[["app-single-file-upload"]],inputs:{existFile:"existFile",fileUpload:"fileUpload"},outputs:{responseEmitter:"responseEmitter"},features:[r.Eb],decls:15,vars:5,consts:[[1,"sm:col-span-6","text-xs","pt-4"],[1,"grid","grid-cols-1","gap-3","xs:grid-cols-3","items-center"],["id","fileId","type","file","hidden","",3,"change","click"],["fileInput",""],["type","submit","type","file",1,"md:ml-3","inline-flex","justify-center","py-2","px-4","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","focus:outline-none","focus:ring-2","focus:ring-offset-2","border-blue-50",3,"disabled","ngClass","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 20 20","fill","currentColor",1,"h-5","w-5"],["fill-rule","evenodd","d","M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM6.293 6.707a1 1 0 010-1.414l3-3a1 1 0 011.414 0l3 3a1 1 0 01-1.414 1.414L11 5.414V13a1 1 0 11-2 0V5.414L7.707 6.707a1 1 0 01-1.414 0z","clip-rule","evenodd"],[1,"font-semibold"],[1,"flex","flex-col","space-y-1","col-span-2","xs:flex-row","xs:justify-between","xs:items-center","py-3"],[1,"flex","flex-col","mt-1","xs:w-1/2","gap-y-1.5"],["class","flex space-x-2 items-center",4,"ngIf"],["class","flex space-x-1.5 ml-4 xs:ml-6",4,"ngIf"],[1,"flex","space-x-2","items-center"],["viewBox","0 0 96 96","fill","#FFF","stroke-miterlimit","10","stroke-width","2",1,"w-5","h-5"],["stroke","#979593","d","M67.1716,7H27c-1.1046,0-2,0.8954-2,2v78 c0,1.1046,0.8954,2,2,2h58c1.1046,0,2-0.8954,2-2V26.8284c0-0.5304-0.2107-1.0391-0.5858-1.4142L68.5858,7.5858 C68.2107,7.2107,67.702,7,67.1716,7z"],["fill","none","stroke","#979593","d","M67,7v18c0,1.1046,0.8954,2,2,2h18"],["fill","#C8C6C4","d","M51 61H41v-2h10c.5523 0 1 .4477 1 1l0 0C52 60.5523 51.5523 61 51 61zM51 55H41v-2h10c.5523 0 1 .4477 1 1l0 0C52 54.5523 51.5523 55 51 55zM51 49H41v-2h10c.5523 0 1 .4477 1 1l0 0C52 48.5523 51.5523 49 51 49zM51 43H41v-2h10c.5523 0 1 .4477 1 1l0 0C52 42.5523 51.5523 43 51 43zM51 67H41v-2h10c.5523 0 1 .4477 1 1l0 0C52 66.5523 51.5523 67 51 67zM79 61H69c-.5523 0-1-.4477-1-1l0 0c0-.5523.4477-1 1-1h10c.5523 0 1 .4477 1 1l0 0C80 60.5523 79.5523 61 79 61zM79 67H69c-.5523 0-1-.4477-1-1l0 0c0-.5523.4477-1 1-1h10c.5523 0 1 .4477 1 1l0 0C80 66.5523 79.5523 67 79 67zM79 55H69c-.5523 0-1-.4477-1-1l0 0c0-.5523.4477-1 1-1h10c.5523 0 1 .4477 1 1l0 0C80 54.5523 79.5523 55 79 55zM79 49H69c-.5523 0-1-.4477-1-1l0 0c0-.5523.4477-1 1-1h10c.5523 0 1 .4477 1 1l0 0C80 48.5523 79.5523 49 79 49zM79 43H69c-.5523 0-1-.4477-1-1l0 0c0-.5523.4477-1 1-1h10c.5523 0 1 .4477 1 1l0 0C80 42.5523 79.5523 43 79 43zM65 61H55c-.5523 0-1-.4477-1-1l0 0c0-.5523.4477-1 1-1h10c.5523 0 1 .4477 1 1l0 0C66 60.5523 65.5523 61 65 61zM65 67H55c-.5523 0-1-.4477-1-1l0 0c0-.5523.4477-1 1-1h10c.5523 0 1 .4477 1 1l0 0C66 66.5523 65.5523 67 65 67zM65 55H55c-.5523 0-1-.4477-1-1l0 0c0-.5523.4477-1 1-1h10c.5523 0 1 .4477 1 1l0 0C66 54.5523 65.5523 55 65 55zM65 49H55c-.5523 0-1-.4477-1-1l0 0c0-.5523.4477-1 1-1h10c.5523 0 1 .4477 1 1l0 0C66 48.5523 65.5523 49 65 49zM65 43H55c-.5523 0-1-.4477-1-1l0 0c0-.5523.4477-1 1-1h10c.5523 0 1 .4477 1 1l0 0C66 42.5523 65.5523 43 65 43z"],["fill","#107C41","d","M12,74h32c2.2091,0,4-1.7909,4-4V38c0-2.2091-1.7909-4-4-4H12c-2.2091,0-4,1.7909-4,4v32 C8,72.2091,9.7909,74,12,74z"],["d","M16.9492,66l7.8848-12.0337L17.6123,42h5.8115l3.9424,7.6486c0.3623,0.7252,0.6113,1.2668,0.7471,1.6236 h0.0508c0.2617-0.58,0.5332-1.1436,0.8164-1.69L33.1943,42h5.335l-7.4082,11.9L38.7168,66H33.041l-4.5537-8.4017 c-0.1924-0.3116-0.374-0.6858-0.5439-1.1215H27.876c-0.0791,0.2684-0.2549,0.631-0.5264,1.0878L22.6592,66H16.9492z"],[1,"text-xs","font-semibold","leading-none","text-gray-600","whitespace-wrap","truncate",3,"tooltip","options"],[1,"flex","space-x-1.5","ml-4","xs:ml-6"],["class","w-1/2 h-1.5 mr-1 relative rounded mt-3",4,"ngIf"],["class","flex items-center",4,"ngIf"],["class"," flex md:flex-row",4,"ngIf"],[1,"w-1/2","h-1.5","mr-1","relative","rounded","mt-3"],[1,"h-1.5","bg-gray-50","rounded-sm",2,"width","100%"],["class","absolute h-1.5 bg-gray-400 rounded-sm top-0 -left-2",3,"width",4,"ngIf"],[1,"absolute","right-1.5","-top-2"],[1,"truncate"],[1,"text-gray-500",3,"ngClass"],[1,"absolute","h-1.5","bg-gray-400","rounded-sm","top-0","-left-2"],[1,"flex","items-center"],[1,"text-xs","font-medium","tracking-wide","text-400","ml-1"],["class","text-rose-500 border-transparent hover:text-rose-400 cursor-pointer rounded focus:outline-none focus:border-gray-800 focus:shadow-outline-gray ml-2","href","javascript: void(0)","tooltip","Cancel",3,"options","click",4,"ngIf"],["href","javascript: void(0)","tooltip","Cancel",1,"text-rose-500","border-transparent","hover:text-rose-400","cursor-pointer","rounded","focus:outline-none","focus:border-gray-800","focus:shadow-outline-gray","ml-2",3,"options","click"],["xmlns","http://www.w3.org/2000/svg","fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"h-5","w-5"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"],[1,"flex","md:flex-row"],["class","flex flex-shrink-0 space-x-1.5 ml-2 md:ml-0 xl:ml-6",4,"ngIf"],["class","w-1/2 flex ",4,"ngIf"],[1,"flex","flex-shrink-0","space-x-1.5","ml-2","md:ml-0","xl:ml-6"],[1,"text-xs","leading-none","text-green-600","font-medium","bg-gray-100","p-1","ml-0.5"],[1,"text-xs","font-medium","tracking-wide","text-gray-400","ml-0.5"],[1,"w-1/2","flex"],["class","text-red-500 border-transparent border hover:text-red-400 cursor-pointer rounded focus:outline-none focus:shadow-outline-gray ml-1 md:ml-2 focus:ring-2","href","javascript: void(0)","tooltip","Delete",3,"options","click",4,"ngIf"],["href","javascript: void(0)","tooltip","Delete",1,"text-red-500","border-transparent","border","hover:text-red-400","cursor-pointer","rounded","focus:outline-none","focus:shadow-outline-gray","ml-1","md:ml-2","focus:ring-2",3,"options","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","stroke-width","1.5","stroke","currentColor","fill","none","stroke-linecap","round","stroke-linejoin","round",1,"w-5","h-5"],["stroke","none","d","M0 0h24v24H0z"],["x1","4","y1","7","x2","20","y2","7"],["x1","10","y1","11","x2","10","y2","17"],["x1","14","y1","11","x2","14","y2","17"],["d","M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12"],["d","M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3"],[1,"h-1.5","mr-1","relative","rounded","mt-3"],[1,"text-xs","leading-none","text-red-600","font-medium","bg-gray-100","p-1","ml-0.5"],["class","flex w-1/2 justify-end",4,"ngIf"],[1,"flex","w-1/2","justify-end"],[1,"text-xs","leading-none","text-gray-500","font-thin","p-1","ml-4"]],template:function(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",0),r.Xb(1,"div",1),r.Xb(2,"div"),r.Xb(3,"input",2,3),r.ec("change",function(e){return t.onChange(e)})("click",function(){return r.Ac(e),r.yc(4).value=""}),r.Wb(),r.Xb(5,"button",4),r.ec("click",function(){return t.onClickUploadFile()}),r.hc(),r.Xb(6,"svg",5),r.Sb(7,"path",6),r.Wb(),r.gc(),r.Xb(8,"span",7),r.Ic(9,"Upload File"),r.Wb(),r.Wb(),r.Wb(),r.Xb(10,"div",8),r.Xb(11,"div",9),r.Gc(12,Le,9,3,"div",10),r.Gc(13,$e,4,3,"div",11),r.Gc(14,Qe,5,1,"div",11),r.Wb(),r.Wb(),r.Wb(),r.Wb()}2&e&&(r.Gb(5),r.qc("disabled",t.fileUpload)("ngClass",t.fileUpload?"bg-blue-600 opacity-50 cursor-not-allowed focus:outline-none":"bg-blue-600 hover:bg-blue-700 focus:ring-2 focus:ring-offset-2 focus:ring-blue-500"),r.Gb(7),r.qc("ngIf",t.fileUpload||"failure"==t.status),r.Gb(1),r.qc("ngIf",t.fileUpload),r.Gb(1),r.qc("ngIf","failure"==t.status))},directives:[s.l,s.n,b.a],pipes:[s.f],styles:["[_nghost-%COMP%]{display:contents}"]}),e})();function tt(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",20),r.Xb(1,"app-create-new-template-message",31),r.ec("templateMsgChg",function(t){return r.Ac(e),r.ic().msgTextAreaChanged(t)}),r.Wb(),r.Wb()}if(2&e){const e=r.ic();r.Gb(1),r.qc("entityId",e.entityId)("templateMsg",e.templateMsg)("SelectedMsg",e.selectedMsg)("apiIsStaticFlag",e.staticTemplate)("fileUploaded",e.showMobileColSection)}}function it(e,t){1&e&&(r.Xb(0,"div",20),r.Sb(1,"app-file-based-on"),r.Wb())}function st(e,t){1&e&&(r.Xb(0,"p",38),r.Ic(1," Atleast 1 file should be successfully uploaded "),r.Wb())}function nt(e,t){1&e&&(r.Xb(0,"div",45),r.Xb(1,"div",46),r.Xb(2,"div",47),r.hc(),r.Xb(3,"svg",48),r.Sb(4,"circle",49),r.Sb(5,"rect",50),r.Sb(6,"rect",51),r.Wb(),r.gc(),r.Xb(7,"div"),r.Xb(8,"span",52),r.Ic(9,"Attention"),r.Wb(),r.Xb(10,"div",53),r.Ic(11," You may not have the matching values in the upload file for the selected template. Please check your file or the template chosen before continuing "),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb())}function ot(e,t){if(1&e&&(r.Xb(0,"div",39),r.Xb(1,"span",40),r.Ic(2,"Preview"),r.Wb(),r.Xb(3,"div",41),r.Xb(4,"p",42),r.Ic(5," Message content based on uploaded file and template "),r.Wb(),r.Xb(6,"div",43),r.Ic(7),r.Wb(),r.Wb(),r.Gc(8,nt,12,0,"div",44),r.Wb()),2&e){const e=r.ic(2);r.Gb(7),r.Kc(" ",e.newMsg," "),r.Gb(1),r.qc("ngIf",e.showWarning)}}function lt(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",20),r.Xb(1,"div",32),r.Xb(2,"label",33),r.Ic(3,"Template data file "),r.Xb(4,"span",18),r.Ic(5,"*"),r.Wb(),r.Wb(),r.Wb(),r.Xb(6,"div",34),r.Xb(7,"app-single-file-upload",35),r.ec("responseEmitter",function(t){return r.Ac(e),r.ic().onClickFileUpload(t)}),r.Wb(),r.Gc(8,st,2,0,"p",36),r.Wb(),r.Gc(9,ot,9,2,"div",37),r.Wb()}if(2&e){const e=r.ic();r.Gb(7),r.qc("existFile",e.existingFile)("fileUpload",e.singleFileUploaded),r.Gb(1),r.qc("ngIf",e.file1.touched&&(null==e.file1.errors?null:e.file1.errors.required)),r.Gb(1),r.qc("ngIf",e.showPreview&&e.newMsg.length>0)}}function rt(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",20),r.Xb(1,"app-select-mobile-column",54),r.ec("mobileColumnResponse",function(t){return r.Ac(e),r.ic().onChangeMobileColumn(t)}),r.Wb(),r.Wb()}}let at=(()=>{class e{constructor(e,t,i,s){this.fb=e,this.tservice=t,this.templateSvc=i,this.router=s,this.isText=!0,this.isShowContact=!1,this.showPreview=!1,this.removeDuplicateChecked=!0,this.showMobileColSection=!1,this.showCreateModal=!1,this.showCancelModal=!1,this.showFileContents=!1,this.added=!1,this.pattern_validation=c.a.pattern_validation,this.minLength=c.a.minLengthTemplateName,this.maxLength=c.a.maxLengthTemplateName,this.files={},this.type="column",this.placeholder="Select Mobile Number column",this.DLTList=[],this.itemList=[],this.showMessage=!1,this.templateMsg="",this.textToDisplay="Column",this.previewIndexOrColumn="column",this.previewMobileColumn="",this.previewTemplateName="",this.newMsg="",this.showWarning=!1,this.enableCreateButton=!1,this.returnObj={newMsg:"",warning:!1},this.showFileUploadSection=!1,this.staticTemplate=1,this.changeEvent=new r.q,this.cancelMessage=c.a.INFO_TXT.templateCancelMessage,this.newTemplateForm=this.fb.group({templateName:["",[n.u.required,Object(te.a)(this.minLength),Object(ee.a)(this.maxLength),n.u.pattern(this.pattern_validation)]],file:[""],basedOn:[""],mobileColumn:[null],newmessage:["",[n.u.required,Object(te.a)(1)]],language:[""],entityId:[null,n.u.required],dlt:[null,n.u.required],removeDuplicates:[!0],patternType:[""],isStatic:[!0]}),this.resetSingleFileUpload=!1}ngOnChanges(e){console.log(e,this.entityID)}ngOnInit(){this.listenToTemplateTypeChanges()}populateDLTList(){this.subscription2=this.templateSvc.findAllDLTs().pipe(Object(Q.a)(e=>{e.forEach(e=>{this.DLTList.push(e),this.itemList.push(e.dltId)})})).subscribe()}listenToTemplateTypeChanges(){this.subscriptionBasedOn=this.templateSvc.getBasedOn().subscribe(e=>{this.previewIndexOrColumn=e,"index"===e&&(this.textToDisplay="Position"),"column"===e&&(this.textToDisplay="Column"),this.newTemplateForm.controls.basedOn.setValue(e),this.formulatePreview()})}receivedEntityId(e){console.log(e),this.entityId=e,this.showFileUploadSection=!1,this.showMessage=!1,this.templateMsg="",this.newMsg="",this.enableCreateButton=!1}EntityIdRequired(e){this.newTemplateForm.controls.entityId.markAsTouched()}onChangeMobileColumn(e){this.previewMobileColumn=e,this.populateFormValuesInPreview(),this.staticCheck()}onClickFileUpload(e){"error"!==e?(this.templateSvc.populateFileDetails(e),this.newTemplateForm.controls.file.setValue(e),this.showMobileColSection=!0,this.showPreview=!0,this.added=!0,this.singleFileUploaded="File Uploaded",this.enableCreateButton=!0,this.formulatePreview()):(console.log("file err or deleted"),this.mobileCol&&this.mobileCol.ClearValue(),this.showMobileColSection=!1,this.showPreview=!1,this.enableCreateButton=!1,this.newTemplateForm.controls.file.setValue(null),this.templateSvc.populateFileDetails(null),this.added=!1)}ngAfterViewChecked(){this.tservice.setTname(this.tname),this.tservice.setMobCol(this.mobileCol),this.tservice.setmsgArea(this.tmessage)}populateFormValuesInPreview(){this.previewTemplateName=this.newTemplateForm.controls.templateName.value}findMatchingDLTMsg(e){this.showMessage=!0,this.singleFileUploaded="reset",this.newTemplateForm.controls.file.setValue(null),this.templateSvc.populateFileDetails(null),this.resetBelowFileButtonSection(),this.staticTemplate=e.is_static,0==this.staticTemplate?(this.showFileUploadSection=!0,this.enableCreateButton=!1,this.setValidatorsToForm()):(console.log("show file section false inside"),this.showFileUploadSection=!1,this.enableCreateButton=!0),e.dlt_template_content?(this.newTemplateForm.controls.dlt.setValue(e.dlt_template_id),this.newTemplateForm.controls.patternType.setValue(e.pattern_type),this.isUnicode=e.pattern_type,this.templateMsg=e.dlt_template_content,this.selectedMsg=e.dlt_template_content,this.newMsg=this.templateMsg,this.showWarning=this.returnObj.warning):(this.showMessage=!1,this.templateMsg="",this.selectedMsg="")}msgTextAreaChanged(e){if(this.templateMsg=e,""==e)this.showFileUploadSection=!1,this.showPreview=!1,this.showMessage=!1,this.showMobileColSection=!1;else{this.showPreview&&this.formulatePreview();const e=this.showFileUploadSection;this.showFileUploadSection=!this.msgType,e!=this.showFileUploadSection&&this.showFileUploadSection&&(this.singleFileUploaded="reset"),this.setValidatorsToForm(),this.showFileUploadSection||(this.enableCreateButton=!0)}this.staticCheck()}staticCheck(){this.msgType||this.newTemplateForm.controls.file.value&&(this.existingFile=this.templateSvc.getFirstFileDetails(),this.showPreview=!0,this.showMobileColSection=!0)}get msgType(){return console.log(this.newTemplateForm.controls.isStatic.value),this.newTemplateForm.controls.isStatic.value}get file1(){return this.newTemplateForm.controls.file}setValidatorsToForm(){this.showFileUploadSection?(this.newTemplateForm.controls.file.setValidators([n.u.required]),this.newTemplateForm.controls.file.updateValueAndValidity(),this.newTemplateForm.controls.basedOn.setValidators([n.u.required]),this.newTemplateForm.controls.basedOn.updateValueAndValidity(),this.newTemplateForm.controls.mobileColumn.setValidators([n.u.required]),this.newTemplateForm.controls.mobileColumn.updateValueAndValidity(),console.log("set validators")):(this.resetBelowFileButtonSection(),console.log("clear validators"))}resetBelowFileButtonSection(){this.showMobileColSection=!1,this.showPreview=!1,this.resetSingleFileUpload=!0,this.newTemplateForm.controls.file.setValidators([]),this.newTemplateForm.controls.file.updateValueAndValidity(),this.newTemplateForm.controls.basedOn.setValidators([]),this.newTemplateForm.controls.basedOn.updateValueAndValidity(),this.newTemplateForm.controls.mobileColumn.setValidators([]),this.newTemplateForm.controls.mobileColumn.updateValueAndValidity()}formulatePreview(){const e=this.newTemplateForm.controls.newmessage.value;this.previewIndexOrColumn=this.newTemplateForm.controls.basedOn.value,""!==e&&this.showPreview&&(this.populateFormValuesInPreview(),this.returnObj=this.templateSvc.messageForPreview(e,this.previewIndexOrColumn),this.newMsg=this.returnObj.newMsg,this.showWarning=this.returnObj.warning)}ngOnDestroy(){this.templateSvc.populateNewTemplateMobileCol(""),this.templateSvc.sendBasedOn(""),this.file1.setValue(null),this.templateSvc.populateSelectedTemplate(void 0),this.templateSvc.populateSelectedDltTemplate(void 0)}routing(e){this.router.navigate([e])}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(n.f),r.Rb(h.a),r.Rb(ie.a),r.Rb(l.c))},e.\u0275cmp=r.Lb({type:e,selectors:[["app-create-new-template"]],viewQuery:function(e,t){if(1&e&&(r.Nc(ce,1),r.Nc(pe.a,1),r.Nc(We,1),r.Nc(Xe.a,1)),2&e){let e;r.xc(e=r.fc())&&(t.mobileCol=e.first),r.xc(e=r.fc())&&(t.tname=e.first),r.xc(e=r.fc())&&(t.tmessage=e.first),r.xc(e=r.fc())&&(t.entityID=e.first)}},outputs:{changeEvent:"changeEvent"},features:[r.Eb],decls:47,vars:14,consts:[[1,"border-b","border-gray-200","pt-2","bg-white"],[1,"flex","justify-between"],[1,"lg:flex","sm:items-baseline"],[1,"text-md","leading-6","font-bold","text-gray-900","lg:px-4","pl-2","lg:text-lg","lg:border-gray-200","lg:border-r"],[1,"mb-2","sm:pb-1","space-x-1","ml-2","text-xxs","lg:text-xs","text-gray-400"],["routerLink","/templates",1,"hover:text-blue-500","cursor-pointer","focus:outline-none","focus:ring-2","focus:ring-offset-2","border-indigo-50","rounded",3,"keydown.enter"],[1,"text-xxs","font-mono"],[1,"hover:text-blue-500","cursor-pointer"],["tabindex","0",1,"flex-1","relative","overflow-y-auto","focus:outline-none"],[1,"py-6","relative"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","md:px-8","mt-6"],[1,"bg-white","p-5","md:p-10","rounded","z-0"],[1,"text-lg","font-medium","text-gray-800"],[1,"border-b-0","mt-4","border-gray-200"],[1,"space-y-8","divide-y","divide-gray-200",3,"formGroup"],[1,"mt-4","grid","grid-cols-1","gap-y-6","gap-x-4","sm:grid-cols-6","divide-y","divide-gray-100"],[1,"sm:col-span-6","text-xs","relative"],["for","name",1,"block","font-semibold","text-gray-700"],[1,"text-red-600"],[1,"mt-2","rounded-md","w-full","sm:w-1/2"],[1,"sm:col-span-6","text-xs","pt-4"],[3,"entityIdEmitter"],[3,"entityId","templateMsg","inTemplate","campaignType","choosenDltTemplate","noEntityId"],["class","sm:col-span-6 text-xs pt-4",4,"ngIf"],[1,"pt-5"],[1,"md:flex","md:justify-between","grid","grid-rows-1","gap-y-2"],[1,"grid","grid-rows-1"],[3,"routePath","cancelMessage"],[1,"md:flex","md:justify-end"],[1,"grid","grid-rows-1","gap-y-2","md:grid-flow-col"],[3,"newTemplateForm","enableButton","title"],[3,"entityId","templateMsg","SelectedMsg","apiIsStaticFlag","fileUploaded","templateMsgChg"],[1,"flex","justify-between","items-center"],["for","mobile",1,"block","font-semibold","text-gray-700"],[1,"mt-4","grid","grid-cols-1","gap-3","md:grid-cols-3","items-center"],[3,"existFile","fileUpload","responseEmitter"],["class","text-xxs sm:text-xs text-red-600 whitespace-nowrap",4,"ngIf"],["class","relative sm:col-span-6 p-3 bg-blue-50 bg-opacity-40 mt-5 border-dashed border-gray-300 rounded border-4",4,"ngIf"],[1,"text-xxs","sm:text-xs","text-red-600","whitespace-nowrap"],[1,"relative","sm:col-span-6","p-3","bg-blue-50","bg-opacity-40","mt-5","border-dashed","border-gray-300","rounded","border-4"],[1,"absolute","right-1","-top-3","text-xxs","text-green-600","mr-1.5","bg-green-100","p-0.5","px-1","uppercase","border-dashed","rounded"],[1,"mt-4","space-y-2"],[1,"text-gray-400"],[1,"bg-blue-50","text-blue-500","p-2","whitespace-pre-wrap"],["class","p-4 mt-4 bg-yellow-50 flex border border-dashed border-yellow-300 rounded-lg",4,"ngIf"],[1,"p-4","mt-4","bg-yellow-50","flex","border","border-dashed","border-yellow-300","rounded-lg"],[1,""],[1,"flex","space-x-2","items-center","justify-center"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24","version","1.1",1,"w-6","h-6","text-yellow-500"],["fill","currentColor","opacity","0.4","cx","12","cy","12","r","10"],["fill","currentColor","x","11","y","7","width","2","height","8","rx","1"],["fill","currentColor","x","11","y","16","width","2","height","2","rx","1"],[1,"text-gray-700","text-sm","font-semibold"],[1,"text-gray-600"],[3,"mobileColumnResponse"]],template:function(e,t){1&e&&(r.Xb(0,"div",0),r.Xb(1,"div",1),r.Xb(2,"div",2),r.Xb(3,"h3",3),r.Ic(4," New Template "),r.Wb(),r.Xb(5,"div",4),r.Xb(6,"span",5),r.ec("keydown.enter",function(){return t.routing("/templates")}),r.Ic(7,"Template"),r.Wb(),r.Xb(8,"span",6),r.Ic(9,"/"),r.Wb(),r.Xb(10,"span",7),r.Ic(11,"Create Template"),r.Wb(),r.Wb(),r.Wb(),r.Sb(12,"div"),r.Wb(),r.Wb(),r.Xb(13,"main",8),r.Xb(14,"div",9),r.Xb(15,"div",10),r.Xb(16,"div",11),r.Xb(17,"div",12),r.Ic(18," Create Template "),r.Wb(),r.Sb(19,"div",13),r.Xb(20,"form",14),r.Xb(21,"div"),r.Xb(22,"div"),r.Xb(23,"div",15),r.Xb(24,"div",16),r.Xb(25,"div"),r.Xb(26,"label",17),r.Ic(27,"Template Name "),r.Xb(28,"span",18),r.Ic(29,"*"),r.Wb(),r.Wb(),r.Xb(30,"div",19),r.Sb(31,"app-template-name"),r.Wb(),r.Wb(),r.Wb(),r.Xb(32,"div",20),r.Xb(33,"app-entity-id",21),r.ec("entityIdEmitter",function(e){return t.receivedEntityId(e)}),r.Wb(),r.Wb(),r.Xb(34,"div",20),r.Xb(35,"app-select-dlt-template",22),r.ec("choosenDltTemplate",function(e){return t.findMatchingDLTMsg(e)})("noEntityId",function(e){return t.EntityIdRequired(e)}),r.Wb(),r.Gc(36,tt,2,5,"div",23),r.Wb(),r.Gc(37,it,2,0,"div",23),r.Gc(38,lt,10,4,"div",23),r.Gc(39,rt,2,0,"div",23),r.Wb(),r.Wb(),r.Wb(),r.Xb(40,"div",24),r.Xb(41,"div",25),r.Xb(42,"div",26),r.Sb(43,"app-campaign-cancel-button",27),r.Wb(),r.Xb(44,"div",28),r.Xb(45,"div",29),r.Sb(46,"app-template-create-button",30),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb()),2&e&&(r.Gb(20),r.qc("formGroup",t.newTemplateForm),r.Gb(15),r.qc("entityId",t.entityId)("templateMsg",t.templateMsg)("inTemplate","createTemp")("campaignType","DLT"),r.Gb(1),r.qc("ngIf",t.showMessage),r.Gb(1),r.qc("ngIf",t.showFileUploadSection),r.Gb(1),r.qc("ngIf",t.showFileUploadSection),r.Gb(1),r.qc("ngIf",t.showFileUploadSection&&t.showMobileColSection),r.Gb(4),r.qc("routePath","/templates")("cancelMessage",t.cancelMessage),r.Gb(3),r.qc("newTemplateForm",t.newTemplateForm)("enableButton",t.enableCreateButton)("title","Create"))},directives:[l.d,n.v,n.q,n.k,pe.a,Xe.a,Fe,s.n,qe.a,De,We,_e.a,et,ce],styles:["[_nghost-%COMP%]{display:contents}"]}),e})();var ct=i("vxHG");function pt(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",12),r.Xb(1,"div",13),r.Xb(2,"div",14),r.Xb(3,"h3",15),r.Ic(4,"Edit Template"),r.Wb(),r.Xb(5,"div",16),r.Xb(6,"span",17),r.ec("keydown.enter",function(){return r.Ac(e),r.ic().routing("/templates")}),r.Ic(7,"Template"),r.Wb(),r.Xb(8,"span",18),r.Ic(9,"/"),r.Wb(),r.Xb(10,"span",19),r.Ic(11,"Edit Template"),r.Wb(),r.Wb(),r.Wb(),r.Sb(12,"div"),r.Wb(),r.Wb()}}function dt(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",12),r.Xb(1,"div",13),r.Xb(2,"div",14),r.Xb(3,"h3",15),r.Ic(4,"Preview Template"),r.Wb(),r.Xb(5,"div",16),r.Xb(6,"span",17),r.ec("keydown.enter",function(){return r.Ac(e),r.ic().routing("/templates")}),r.Ic(7,"Template"),r.Wb(),r.Xb(8,"span",18),r.Ic(9,"/"),r.Wb(),r.Xb(10,"span",19),r.Ic(11,"Preview Template"),r.Wb(),r.Wb(),r.Wb(),r.Sb(12,"div"),r.Wb(),r.Wb()}}function ht(e,t){1&e&&(r.Xb(0,"div",20),r.Ic(1,"Edit Template"),r.Wb())}function bt(e,t){1&e&&(r.Xb(0,"div",20),r.Ic(1,"Preview Template"),r.Wb())}function mt(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div"),r.Xb(1,"div",21),r.Sb(2,"input",22),r.Xb(3,"div",23),r.Xb(4,"div"),r.Xb(5,"label",24),r.Ic(6,"Template Name "),r.Wb(),r.Xb(7,"div",25),r.Xb(8,"app-template-name",26),r.ec("Tname",function(t){return r.Ac(e),r.ic(2).enableSave(t)}),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb()}if(2&e){const e=r.ic(2);r.Gb(8),r.qc("editTemplateName",e.templateName)}}function ut(e,t){if(1&e&&(r.Xb(0,"div"),r.Gc(1,mt,9,1,"div",8),r.Wb()),2&e){const e=r.ic();r.Gb(1),r.qc("ngIf",!e.apiError)}}function gt(e,t){1&e&&(r.hc(),r.Xb(0,"svg",69),r.Sb(1,"circle",70),r.Sb(2,"path",71),r.Wb())}function ft(e,t){if(1&e){const e=r.Yb();r.Xb(0,"div",27),r.Xb(1,"div",28),r.hc(),r.Xb(2,"svg",29),r.Sb(3,"circle",30),r.Sb(4,"path",31),r.Sb(5,"polygon",32),r.Sb(6,"path",33),r.Sb(7,"polygon",34),r.Sb(8,"ellipse",35),r.Sb(9,"ellipse",36),r.Sb(10,"ellipse",37),r.Sb(11,"ellipse",38),r.Sb(12,"circle",39),r.Sb(13,"rect",40),r.Sb(14,"rect",41),r.Sb(15,"ellipse",42),r.Sb(16,"ellipse",43),r.Sb(17,"circle",44),r.Sb(18,"circle",45),r.Sb(19,"path",46),r.Sb(20,"path",47),r.Sb(21,"path",48),r.Sb(22,"circle",49),r.Sb(23,"rect",50),r.Sb(24,"rect",51),r.Sb(25,"ellipse",52),r.Sb(26,"ellipse",53),r.Sb(27,"circle",54),r.Sb(28,"circle",55),r.Sb(29,"path",56),r.Sb(30,"path",57),r.Sb(31,"path",58),r.Sb(32,"path",59),r.Sb(33,"path",60),r.Sb(34,"ellipse",61),r.Sb(35,"ellipse",62),r.Wb(),r.Wb(),r.gc(),r.Xb(36,"div",28),r.Xb(37,"p",63),r.Ic(38,"Oops!"),r.Wb(),r.Wb(),r.Xb(39,"div",64),r.Xb(40,"p",65),r.Ic(41,"It seems something went wrong..."),r.Wb(),r.Wb(),r.Xb(42,"div",64),r.Xb(43,"button",66),r.ec("click",function(){return r.Ac(e),r.ic().retry()}),r.Ic(44,"Try Again "),r.Gc(45,gt,3,0,"svg",67),r.Wb(),r.Wb(),r.Xb(46,"div",68),r.Sb(47,"span"),r.Wb(),r.Wb()}if(2&e){const e=r.ic();r.Gb(45),r.qc("ngIf",e.spinner)}}function xt(e,t){1&e&&r.Sb(0,"app-edit-skeleton")}function wt(e,t){if(1&e&&(r.Xb(0,"div",79),r.Xb(1,"div",28),r.Xb(2,"span",80),r.Ic(3,"Mobile Column:"),r.Wb(),r.Xb(4,"span",81),r.Ic(5),r.Wb(),r.Wb(),r.Xb(6,"div",28),r.Xb(7,"span",80),r.Ic(8,"Type"),r.Wb(),r.Xb(9,"span",81),r.Ic(10),r.Wb(),r.Wb(),r.Wb()),2&e){const e=r.ic().$implicit;r.Gb(5),r.Kc("\t",e.t_mobile_column,""),r.Gb(5),r.Kc("",e.t_type," ")}}function vt(e,t){if(1&e&&(r.Xb(0,"div",28),r.Xb(1,"span",80),r.Ic(2,"Last Modified"),r.Wb(),r.Xb(3,"span",81),r.Ic(4),r.Wb(),r.Wb()),2&e){const e=r.ic().$implicit;r.Gb(4),r.Kc("\t",e.modified_ts,"")}}function yt(e,t){if(1&e&&(r.Xb(0,"div",74),r.Xb(1,"div",75),r.Xb(2,"div",76),r.Xb(3,"label",77),r.Ic(4),r.Wb(),r.Wb(),r.Gc(5,wt,11,2,"div",78),r.Xb(6,"div",79),r.Xb(7,"div",28),r.Xb(8,"span",80),r.Ic(9,"DLT Template ID"),r.Wb(),r.Xb(10,"span",81),r.Ic(11),r.Wb(),r.Wb(),r.Xb(12,"div",28),r.Xb(13,"span",80),r.Ic(14,"Entity ID"),r.Wb(),r.Xb(15,"span",81),r.Ic(16),r.Wb(),r.Wb(),r.Wb(),r.Xb(17,"div",79),r.Xb(18,"div",28),r.Xb(19,"span",80),r.Ic(20,"Created"),r.Wb(),r.Xb(21,"span",81),r.Ic(22),r.Wb(),r.Wb(),r.Gc(23,vt,5,1,"div",82),r.Wb(),r.Wb(),r.Xb(24,"div",83),r.Xb(25,"div",84),r.Ic(26),r.Wb(),r.Wb(),r.Wb()),2&e){const e=t.$implicit;r.Gb(4),r.Kc("",e.t_name," "),r.Gb(1),r.qc("ngIf",(null==e||null==e.t_type?null:e.t_type.length)>0),r.Gb(6),r.Jc(e.dlt_template_id),r.Gb(5),r.Jc(e.dlt_entity_id),r.Gb(6),r.Jc(e.created_ts),r.Gb(1),r.qc("ngIf",e.modified_ts.length>1),r.Gb(3),r.Kc("\t",e.t_content,"")}}function Ct(e,t){if(1&e&&(r.Xb(0,"div",72),r.Gc(1,yt,27,7,"div",73),r.Wb()),2&e){const e=r.ic();r.Gb(1),r.qc("ngForOf",e.templateDetail)}}function It(e,t){if(1&e&&(r.Xb(0,"div",90),r.Xb(1,"div",91),r.Sb(2,"app-template-create-button",92),r.Wb(),r.Wb()),2&e){const e=r.ic(2);r.Gb(2),r.qc("newTemplateForm",e.updateTemplateForm)("enableButton",e.enableCreateButton)("title","Save")}}function Tt(e,t){if(1&e&&(r.Xb(0,"div",85),r.Xb(1,"div",86),r.Xb(2,"div",87),r.Sb(3,"app-campaign-cancel-button",88),r.Wb(),r.Gc(4,It,3,3,"div",89),r.Wb(),r.Wb()),2&e){const e=r.ic();r.Gb(3),r.qc("routePath","/templates")("cancelMessage",e.cancelMessage),r.Gb(1),r.qc("ngIf",e.editTempEnable)}}let Wt=(()=>{class e{constructor(e,t,i,s,o,l){this.search=e,this.router=t,this.fb=i,this.tservice=s,this.route=o,this.commonservice=l,this.pattern_validation=c.a.pattern_validation,this.minLength=c.a.minLengthTemplateName,this.maxLength=c.a.maxLengthTemplateName,this.enableCreateButton=!1,this.cancelMessage=c.a.INFO_TXT.templateEditCancelMessage,this.ispreview=!1,this.apiError=!1,this.spinner=!1,this.skeleton=!1,this.templateDetail=[],this.editTempEnable=!1,this.updateTemplateForm=this.fb.group({id:"",templateName:["",[n.u.required,Object(te.a)(this.minLength),Object(ee.a)(this.maxLength),n.u.pattern(this.pattern_validation)]]})}ngOnInit(){this.subscribeData(),this.getUserPermissions()}subscribeData(){this.skeleton=!0,this.route.queryParams.subscribe(e=>{e.templates?(this.ispreview=!0,this.templates=e.templates,this.tservice.getTemplateByGivenId(this.templates).subscribe(e=>{e&&(this.spinner=!1,this.skeleton=!1,this.Value=e,this.templateDetail.push(this.Value),this.updateTemplateForm.controls.id.setValue(this.Value.id),this.templateName=this.Value.t_name,this.updateTemplateForm.controls.templateName.setValue(this.Value.t_name))},e=>{this.apiError=!0})):(this.ispreview=!1,this.templates=e.previewTemplates,this.tservice.getTemplateByGivenId(this.templates).subscribe(e=>{e&&(this.spinner=!1,this.skeleton=!1,this.Value=e,this.templateDetail.push(this.Value))},e=>{this.skeleton=!1,this.apiError=!0}))})}retry(){this.apiError=!1,this.spinner=!0,this.subscribeData()}enableSave(e){this.enableCreateButton=this.Value.t_name!=e}routing(e){this.router.navigate([e])}getUserPermissions(){this.userPermissionSubscription=this.commonservice.availablePermissions.subscribe(e=>{if(console.log(e),e){const{templates:t}=e;this.editTempEnable=t.update}})}ngOnDestroy(){this.userPermissionSubscription&&this.userPermissionSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(r.Rb(p.a),r.Rb(l.c),r.Rb(n.f),r.Rb(h.a),r.Rb(l.a),r.Rb(d.a))},e.\u0275cmp=r.Lb({type:e,selectors:[["app-edit-template-detail"]],decls:15,vars:10,consts:[["class","border-b border-gray-200 pt-2 bg-white",4,"ngIf"],["tabindex","0",1,"flex-1","relative","overflow-y-auto","focus:outline-none"],[1,"py-6","relative"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","md:px-8","mt-6"],[1,"bg-white","p-5","md:p-10","rounded","z-0"],["class","text-lg font-medium text-gray-800",4,"ngIf"],[1,"border-b-0","mt-4","border-gray-200"],[1,"space-y-8","divide-y","divide-gray-200",3,"formGroup"],[4,"ngIf"],["class","min-h-screen flex flex-col items-center justify-center",4,"ngIf"],["class","sm:col-span-6 text-xs pt-4",4,"ngIf"],["class","pt-5",4,"ngIf"],[1,"border-b","border-gray-200","pt-2","bg-white"],[1,"flex","justify-between"],[1,"lg:flex","sm:items-baseline"],[1,"text-md","leading-6","font-bold","text-gray-900","lg:px-4","pl-2","lg:text-lg","lg:border-gray-200","lg:border-r"],[1,"mb-2","sm:pb-1","space-x-1","ml-2","text-xxs","lg:text-xs","text-gray-400"],["routerLink","/templates",1,"hover:text-blue-500","cursor-pointer","focus:outline-none","focus:ring-2","rounded",3,"keydown.enter"],[1,"text-xxs","font-mono"],[1,"hover:text-blue-500","cursor-pointer"],[1,"text-lg","font-medium","text-gray-800"],[1,"mt-4","grid","grid-cols-1","gap-y-6","gap-x-4","sm:grid-cols-6","divide-y","divide-gray-100"],["type","text","formControlName","id","hidden",""],[1,"sm:col-span-6","text-xs"],["for","name",1,"block","font-semibold","text-gray-700"],[1,"mt-2","relative","rounded-md","w-full","sm:w-1/2"],[3,"editTemplateName","Tname"],[1,"min-h-screen","flex","flex-col","items-center","justify-center"],[1,""],["viewBox","0 0 1120.59226 777.91584",1,"w-32","h-32","text-rose-300"],["cx","212.59226","cy","103","r","64","fill","currentColor"],["d","M563.68016,404.16381c0,151.01141-89.77389,203.73895-200.51559,203.73895S162.649,555.17522,162.649,404.16381,363.16457,61.04208,363.16457,61.04208,563.68016,253.1524,563.68016,404.16381Z","transform","translate(-39.70387 -61.04208)","fill","#f2f2f2"],["points","316.156 523.761 318.21 397.378 403.674 241.024 318.532 377.552 319.455 320.725 378.357 207.605 319.699 305.687 319.699 305.687 321.359 203.481 384.433 113.423 321.621 187.409 322.658 0 316.138 248.096 316.674 237.861 252.547 139.704 315.646 257.508 309.671 371.654 309.493 368.625 235.565 265.329 309.269 379.328 308.522 393.603 308.388 393.818 308.449 394.99 293.29 684.589 313.544 684.589 315.974 535.005 389.496 421.285 316.156 523.761","fill","#3f3d56"],["d","M1160.29613,466.01367c0,123.61-73.4842,166.77-164.13156,166.77s-164.13156-43.16-164.13156-166.77S996.16457,185.15218,996.16457,185.15218,1160.29613,342.40364,1160.29613,466.01367Z","transform","translate(-39.70387 -61.04208)","fill","#f2f2f2"],["points","950.482 552.833 952.162 449.383 1022.119 321.4 952.426 433.154 953.182 386.639 1001.396 294.044 953.382 374.329 953.382 374.329 954.741 290.669 1006.369 216.952 954.954 277.514 955.804 124.11 950.467 327.188 950.906 318.811 898.414 238.464 950.064 334.893 945.173 428.327 945.027 425.847 884.514 341.294 944.844 434.608 944.232 446.293 944.123 446.469 944.173 447.428 931.764 684.478 948.343 684.478 950.332 562.037 1010.514 468.952 950.482 552.833","fill","#3f3d56"],["cx","554.59226","cy","680.47903","rx","554.59226","ry","28.03433","fill","#3f3d56"],["cx","892.44491","cy","726.79663","rx","94.98858","ry","4.80162","fill","#3f3d56"],["cx","548.71959","cy","773.11422","rx","94.98858","ry","4.80162","fill","#3f3d56"],["cx","287.94432","cy","734.27887","rx","217.01436","ry","10.96996","fill","#3f3d56"],["cx","97.08375","cy","566.26982","r","79","fill","#2f2e41"],["x","99.80546","y","689.02332","width","24","height","43","transform","translate(-31.32451 -62.31008) rotate(0.67509)","fill","#2f2e41"],["x","147.80213","y","689.58887","width","24","height","43","transform","translate(-31.31452 -62.87555) rotate(0.67509)","fill","#2f2e41"],["cx","119.54569","cy","732.61606","rx","7.5","ry","20","transform","translate(-654.1319 782.47948) rotate(-89.32491)","fill","#2f2e41"],["cx","167.55414","cy","732.18168","rx","7.5","ry","20","transform","translate(-606.25475 830.05533) rotate(-89.32491)","fill","#2f2e41"],["cx","99.31925","cy","546.29477","r","27","fill","#fff"],["cx","99.31925","cy","546.29477","r","9","fill","#3f3d56"],["d","M61.02588,552.94636c-6.04185-28.64075,14.68758-57.26483,46.30049-63.93367s62.13813,11.14292,68.18,39.78367-14.97834,38.93-46.59124,45.59886S67.06774,581.58712,61.02588,552.94636Z","transform","translate(-39.70387 -61.04208)","fill","currentColor"],["d","M257.29613,671.38411c0,55.07585-32.73985,74.3063-73.13,74.3063q-1.40351,0-2.80255-.0312c-1.87139-.04011-3.72494-.1292-5.55619-.254-36.45135-2.57979-64.77127-22.79937-64.77127-74.02113,0-53.00843,67.73872-119.89612,72.827-124.84633l.00892-.00889c.19608-.19159.29409-.28516.29409-.28516S257.29613,616.30827,257.29613,671.38411Z","transform","translate(-39.70387 -61.04208)","fill","currentColor"],["d","M181.50168,737.26482l26.747-37.37367-26.81386,41.4773-.07125,4.29076c-1.87139-.04011-3.72494-.1292-5.55619-.254l2.88282-55.10258-.0223-.42775.049-.0802.27179-5.20415-26.88076-41.5798,26.96539,37.67668.06244,1.105,2.17874-41.63324-23.0132-42.96551,23.29391,35.6583,2.26789-86.31419.00892-.294v.28516l-.37871,68.064,22.91079-26.98321-23.00435,32.84678-.60595,37.27566L204.18523,621.958l-21.4805,41.259-.33863,20.723,31.05561-49.79149-31.17146,57.023Z","transform","translate(-39.70387 -61.04208)","fill","#3f3d56"],["cx","712.48505","cy","565.41532","r","79","fill","#2f2e41"],["x","741.77716","y","691.82355","width","24","height","43","transform","translate(-215.99457 191.86399) rotate(-17.08345)","fill","#2f2e41"],["x","787.6593","y","677.72286","width","24","height","43","transform","matrix(0.95588, -0.29376, 0.29376, 0.95588, -209.82788, 204.72037)","fill","#2f2e41"],["cx","767.887","cy","732.00275","rx","20","ry","7.5","transform","translate(-220.8593 196.83312) rotate(-17.08345)","fill","#2f2e41"],["cx","813.47537","cy","716.94619","rx","20","ry","7.5","transform","translate(-214.42477 209.56103) rotate(-17.08345)","fill","#2f2e41"],["cx","708.52153","cy","545.71023","r","27","fill","#fff"],["cx","708.52153","cy","545.71023","r","9","fill","#3f3d56"],["d","M657.35526,578.74316c-14.48957-25.43323-3.47841-59.016,24.59412-75.0092s62.57592-8.34055,77.06549,17.09268-2.39072,41.6435-30.46325,57.63671S671.84483,604.17639,657.35526,578.74316Z","transform","translate(-39.70387 -61.04208)","fill","currentColor"],["d","M611.29613,661.29875c0,50.55711-30.05368,68.20979-67.13,68.20979q-1.28835,0-2.57261-.02864c-1.71785-.03682-3.41933-.1186-5.10033-.23313-33.46068-2.36813-59.45707-20.92878-59.45707-67.948,0-48.65932,62.18106-110.05916,66.85186-114.60322l.00819-.00817c.18-.17587.27-.26177.27-.26177S611.29613,610.74164,611.29613,661.29875Z","transform","translate(-39.70387 -61.04208)","fill","currentColor"],["d","M541.72029,721.77424l24.55253-34.30732-24.6139,38.07426-.0654,3.93872c-1.71785-.03682-3.41933-.1186-5.10033-.23313l2.6463-50.58165-.02047-.39266.045-.07361.24949-4.77718-24.67531-38.16836,24.753,34.58547.05731,1.01433,2-38.21741-21.12507-39.44039L541.80616,625.928l2.08182-79.23247.00819-.26994v.26177l-.34764,62.47962,21.031-24.76934-21.11693,30.15184-.55624,34.21735,19.63634-32.839-19.71812,37.87389-.31085,19.0228,28.50763-45.70631-28.614,52.34448Z","transform","translate(-39.70387 -61.04208)","fill","#3f3d56"],["d","M875.29613,682.38411c0,55.07585-32.73985,74.3063-73.13,74.3063q-1.4035,0-2.80255-.0312c-1.87139-.04011-3.72494-.1292-5.55619-.254-36.45135-2.57979-64.77127-22.79937-64.77127-74.02113,0-53.00843,67.73872-119.89612,72.827-124.84633l.00892-.00889c.19608-.19159.29409-.28516.29409-.28516S875.29613,627.30827,875.29613,682.38411Z","transform","translate(-39.70387 -61.04208)","fill","currentColor"],["d","M799.50168,748.26482l26.747-37.37367-26.81386,41.4773-.07125,4.29076c-1.87139-.04011-3.72494-.1292-5.55619-.254l2.88282-55.10258-.0223-.42775.049-.0802.27179-5.20415L770.108,654.01076l26.96539,37.67668.06244,1.105,2.17874-41.63324-23.0132-42.96551,23.29391,35.6583,2.26789-86.31419.00892-.294v.28516l-.37871,68.064,22.91079-26.98321-23.00435,32.84678-.606,37.27566L822.18523,632.958l-21.4805,41.259-.33863,20.723,31.05561-49.79149-31.17146,57.023Z","transform","translate(-39.70387 -61.04208)","fill","#3f3d56"],["cx","721.51694","cy","656.82212","rx","12.40027","ry","39.5","transform","translate(-220.83517 966.22323) rotate(-64.62574)","fill","#2f2e41"],["cx","112.51694","cy","651.82212","rx","12.40027","ry","39.5","transform","translate(-574.07936 452.71367) rotate(-68.15829)","fill","#2f2e41"],[1,"text-xl","font-semibold"],[1,"mt-3"],[1,"text-xs","text-gray-400","font-medium"],[1,"mx-2","my-2","transition","duration-150","ease-in-out","focus:outline-none","bg-red-50","hover:bg-red-100","rounded","text-rose-700","font-medium","px-6","py-2","text-xs","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-indigo-700",3,"click"],["class","animate-spin h-5 w-5 text-black ml-2","xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",4,"ngIf"],[1,"h-1/2"],["xmlns","http://www.w3.org/2000/svg","fill","currentColor","viewBox","0 0 24 24",1,"animate-spin","h-5","w-5","text-black","ml-2"],["cx","12","cy","12","r","10","stroke","currentColor","stroke-width","4",1,"opacity-25"],["fill","currentColor","d","M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z",1,"opacity-75"],[1,"sm:col-span-6","text-xs","pt-4"],["class","relative sm:col-span-6 p-4 bg-gray-100 border-gray-300 border-2 border-dashed bg-opacity-40 mt-2 rounded-2xl shadow-sm",4,"ngFor","ngForOf"],[1,"relative","sm:col-span-6","p-4","bg-gray-100","border-gray-300","border-2","border-dashed","bg-opacity-40","mt-2","rounded-2xl","shadow-sm"],[1,"flex","justify-start","flex-col","mt-2","space-y-4"],[1,"flex","justify-between","items-center","relative","mb-3"],["for","message",1,"block","text-sm","text-gray-500","font-medium","uppercase","pl-0","rounded"],["class","flex flex-col space-y-3 md:space-y-0 md:flex-row md:justify-between md:items-center",4,"ngIf"],[1,"flex","flex-col","space-y-3","md:space-y-0","md:flex-row","md:justify-between","md:items-center"],[1,"text-xxs","text-gray-500"],[1,"text-xxs","text-indigo-600","ml-1","bg-indigo-100","bg-opacity-60","p-0.5","px-1","rounded"],["class","",4,"ngIf"],[1,"mt-8","space-y-2"],[1,"bg-indigo-50","text-indigo-600","p-2","border","border-indigo-100","rounded","whitespace-pre-wrap"],[1,"pt-5"],[1,"md:flex","md:justify-between","grid","grid-rows-1","gap-y-2"],[1,"grid","grid-rows-1"],[3,"routePath","cancelMessage"],["class","md:flex md:justify-end",4,"ngIf"],[1,"md:flex","md:justify-end"],[1,"grid","grid-rows-1","gap-y-2","md:grid-flow-col"],[3,"newTemplateForm","enableButton","title"]],template:function(e,t){1&e&&(r.Gc(0,pt,13,0,"div",0),r.Gc(1,dt,13,0,"div",0),r.Xb(2,"main",1),r.Xb(3,"div",2),r.Xb(4,"div",3),r.Xb(5,"div",4),r.Gc(6,ht,2,0,"div",5),r.Gc(7,bt,2,0,"div",5),r.Sb(8,"div",6),r.Xb(9,"form",7),r.Gc(10,ut,2,1,"div",8),r.Gc(11,ft,48,1,"div",9),r.Gc(12,xt,1,0,"app-edit-skeleton",8),r.Gc(13,Ct,2,1,"div",10),r.Gc(14,Tt,5,3,"div",11),r.Wb(),r.Wb(),r.Wb(),r.Wb(),r.Wb()),2&e&&(r.qc("ngIf",t.ispreview),r.Gb(1),r.qc("ngIf",0==t.ispreview),r.Gb(5),r.qc("ngIf",t.ispreview),r.Gb(1),r.qc("ngIf",0==t.ispreview),r.Gb(2),r.qc("formGroup",t.updateTemplateForm),r.Gb(1),r.qc("ngIf",t.ispreview),r.Gb(1),r.qc("ngIf",t.apiError),r.Gb(1),r.qc("ngIf",t.skeleton),r.Gb(1),r.qc("ngIf",!t.apiError||!t.skeleton),r.Gb(1),r.qc("ngIf",t.ispreview&&t.editTempEnable))},directives:[s.n,n.v,n.q,n.k,l.d,n.c,n.p,n.i,pe.a,ct.a,s.m,qe.a,De],styles:["[_nghost-%COMP%]{display:contents}"]}),e})();const Xt=[{path:"",component:J},{path:"",component:a,canActivateChild:[i("zehQ").a],children:[{path:"new",component:at},{path:"edit",component:Wt},{path:"preview",component:Wt}]}];let St=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({imports:[[l.f.forChild(Xt)],l.f]}),e})();var Mt=i("PCNd");let Gt=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=r.Pb({type:e}),e.\u0275inj=r.Ob({providers:[p.a],imports:[[s.c,n.m,St,n.t,o.a,Mt.a,b.b]]}),e})()}}]);